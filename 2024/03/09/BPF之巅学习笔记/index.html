<!-- build time:Wed Sep 10 2025 22:20:13 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="google-site-verification" content="meY19x4ZHP3_DDZwmuVj0400BZy2zVv4lSeZLIHDdE"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>BPF之巅学习笔记 | weeweetan</title><meta name="description" content="第二章2.3 扩展版BPF2.4 调用栈回溯2.5 火焰图2.6 事件源2.7 kprobes内核探测点2.8 uprobes用户层探测点2.9 跟踪点2.10 USDT2.11 动态USDT2.12 性能监控计数器2.13 perf_events第三章3.1 概论3.2 性能分析方法论3.2.1 业务负载画像谁导致了这个负载(eg PID, process name, UID, IP addre"><meta name="keywords" content="BPF"><meta property="og:type" content="article"><meta property="og:title" content="BPF之巅学习笔记"><meta property="og:url" content="https://weeweetan.github.io/2024/03/09/BPF之巅学习笔记/index.html"><meta property="og:site_name" content="weeweetan&#39;s blog"><meta property="og:description" content="第二章2.3 扩展版BPF2.4 调用栈回溯2.5 火焰图2.6 事件源2.7 kprobes内核探测点2.8 uprobes用户层探测点2.9 跟踪点2.10 USDT2.11 动态USDT2.12 性能监控计数器2.13 perf_events第三章3.1 概论3.2 性能分析方法论3.2.1 业务负载画像谁导致了这个负载(eg PID, process name, UID, IP addre"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-09-10T14:19:18.523Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="BPF之巅学习笔记"><meta name="twitter:description" content="第二章2.3 扩展版BPF2.4 调用栈回溯2.5 火焰图2.6 事件源2.7 kprobes内核探测点2.8 uprobes用户层探测点2.9 跟踪点2.10 USDT2.11 动态USDT2.12 性能监控计数器2.13 perf_events第三章3.1 概论3.2 性能分析方法论3.2.1 业务负载画像谁导致了这个负载(eg PID, process name, UID, IP addre"><link rel="canonical" href="https://weeweetan.github.io/2024/03/09/BPF之巅学习笔记/index.html"><link rel="alternate" href="/atom.xml" title="weeweetan&#39;s blog" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.css"></head><body class="main-center" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/weeweetan" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">weeweetan</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">Backend Developer</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Chengdu, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="搜索"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">首页</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">归档</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">分类</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">标签</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">项目</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">书单</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">友链</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">关于</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/weeweetan" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="http://weibo.com" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top"><i class="icon icon-weibo"></i></a></li><li><a href="https://twitter.com" target="_blank" title="Twitter" data-toggle="tooltip" data-placement="top"><i class="icon icon-twitter"></i></a></li><li><a href="https://www.behance.net" target="_blank" title="Behance" data-toggle="tooltip" data-placement="top"><i class="icon icon-behance"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">公告</h3><div class="widget-body"><div id="board"><div class="content"><p style="color:red">声明：本站文章仅代表作者个人观点，与作者所在公司无关。</p><br>欢迎交流与分享经验!</div></div></div></div><div class="widget"><h3 class="widget-title">分类</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/BPF/">BPF</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/FFmpeg/">FFmpeg</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/GLib/">GLib</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Socket/">Socket</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VMware-vSphere/">VMware-vSphere</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/libxml/">libxml</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/总结/">总结</a><span class="category-list-count">9</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签</h3><div class="widget-body"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/BPF/">BPF</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dos/">Dos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FFmpeg/">FFmpeg</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GDB/">GDB</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GLib/">GLib</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Laravel/">Laravel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Socket/">Socket</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VMware-vSphere/">VMware-vSphere</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/libxml/">libxml</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/systemtap/">systemtap</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vddk/">vddk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vxlan/">vxlan</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/翻译/">翻译</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/驱动模块/">驱动模块</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签云</h3><div class="widget-body tagcloud"><a href="/tags/BPF/" style="font-size:13px">BPF</a> <a href="/tags/C/" style="font-size:13px">C</a> <a href="/tags/Dos/" style="font-size:13px">Dos</a> <a href="/tags/FFmpeg/" style="font-size:13px">FFmpeg</a> <a href="/tags/GDB/" style="font-size:13px">GDB</a> <a href="/tags/GLib/" style="font-size:13.25px">GLib</a> <a href="/tags/Java/" style="font-size:13px">Java</a> <a href="/tags/Laravel/" style="font-size:13px">Laravel</a> <a href="/tags/Linux/" style="font-size:13.25px">Linux</a> <a href="/tags/MySQL/" style="font-size:13px">MySQL</a> <a href="/tags/Nginx/" style="font-size:14px">Nginx</a> <a href="/tags/PHP/" style="font-size:13.5px">PHP</a> <a href="/tags/Socket/" style="font-size:13.25px">Socket</a> <a href="/tags/VMware-vSphere/" style="font-size:13.75px">VMware-vSphere</a> <a href="/tags/libxml/" style="font-size:13px">libxml</a> <a href="/tags/systemtap/" style="font-size:13.25px">systemtap</a> <a href="/tags/vddk/" style="font-size:13px">vddk</a> <a href="/tags/vxlan/" style="font-size:13px">vxlan</a> <a href="/tags/翻译/" style="font-size:13px">翻译</a> <a href="/tags/驱动模块/" style="font-size:13px">驱动模块</a></div></div><div class="widget"><h3 class="widget-title">归档</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">最新文章</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/BPF/">BPF</a></p><p class="item-title"><a href="/2024/03/09/BPF之巅学习笔记/" class="title">BPF之巅学习笔记</a></p><p class="item-date"><time datetime="2024-03-09T13:34:31.000Z" itemprop="datePublished">2024-03-09</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Nginx/">Nginx</a></p><p class="item-title"><a href="/2023/12/14/Nginx的mirror模块详解/" class="title">Nginx的mirror模块详解</a></p><p class="item-date"><time datetime="2023-12-14T14:28:05.000Z" itemprop="datePublished">2023-12-14</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Nginx/">Nginx</a></p><p class="item-title"><a href="/2023/09/21/Nginx的auth-basic模块详解/" class="title">Nginx的auth_basic模块详解</a></p><p class="item-date"><time datetime="2023-09-21T15:14:35.000Z" itemprop="datePublished">2023-09-21</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Nginx/">Nginx</a></p><p class="item-title"><a href="/2023/06/29/Nginx的geoip模块详解/" class="title">Nginx的geoip模块详解</a></p><p class="item-date"><time datetime="2023-06-29T15:06:24.000Z" itemprop="datePublished">2023-06-29</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/Nginx/">Nginx</a></p><p class="item-title"><a href="/2023/02/26/Nginx的try-files模块/" class="title">Nginx的try_files模块</a></p><p class="item-date"><time datetime="2023-02-26T15:59:53.000Z" itemprop="datePublished">2023-02-26</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-BPF之巅学习笔记" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">BPF之巅学习笔记</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2024/03/09/BPF之巅学习笔记/" class="article-date"><time datetime="2024-03-09T13:34:31.000Z" itemprop="datePublished">2024-03-09</time></a></span> <span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/BPF/">BPF</a></span> <span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link" href="/tags/BPF/">BPF</a></span> <span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2024/03/09/BPF之巅学习笔记/#comments" class="article-comment-link">评论</a></span> <span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 2.6k(字)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 14(分)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><h3 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h3><h4 id="2-3-扩展版BPF"><a href="#2-3-扩展版BPF" class="headerlink" title="2.3 扩展版BPF"></a>2.3 扩展版BPF</h4><h4 id="2-4-调用栈回溯"><a href="#2-4-调用栈回溯" class="headerlink" title="2.4 调用栈回溯"></a>2.4 调用栈回溯</h4><h4 id="2-5-火焰图"><a href="#2-5-火焰图" class="headerlink" title="2.5 火焰图"></a>2.5 火焰图</h4><h4 id="2-6-事件源"><a href="#2-6-事件源" class="headerlink" title="2.6 事件源"></a>2.6 事件源</h4><h4 id="2-7-kprobes"><a href="#2-7-kprobes" class="headerlink" title="2.7 kprobes"></a>2.7 kprobes</h4><blockquote><p>内核探测点</p></blockquote><h4 id="2-8-uprobes"><a href="#2-8-uprobes" class="headerlink" title="2.8 uprobes"></a>2.8 uprobes</h4><blockquote><p>用户层探测点</p></blockquote><h4 id="2-9-跟踪点"><a href="#2-9-跟踪点" class="headerlink" title="2.9 跟踪点"></a>2.9 跟踪点</h4><h4 id="2-10-USDT"><a href="#2-10-USDT" class="headerlink" title="2.10 USDT"></a>2.10 USDT</h4><h4 id="2-11-动态USDT"><a href="#2-11-动态USDT" class="headerlink" title="2.11 动态USDT"></a>2.11 动态USDT</h4><h4 id="2-12-性能监控计数器"><a href="#2-12-性能监控计数器" class="headerlink" title="2.12 性能监控计数器"></a>2.12 性能监控计数器</h4><h4 id="2-13-perf-events"><a href="#2-13-perf-events" class="headerlink" title="2.13 perf_events"></a>2.13 perf_events</h4><h3 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h3><h4 id="3-1-概论"><a href="#3-1-概论" class="headerlink" title="3.1 概论"></a>3.1 概论</h4><h4 id="3-2-性能分析方法论"><a href="#3-2-性能分析方法论" class="headerlink" title="3.2 性能分析方法论"></a>3.2 性能分析方法论</h4><h5 id="3-2-1-业务负载画像"><a href="#3-2-1-业务负载画像" class="headerlink" title="3.2.1 业务负载画像"></a>3.2.1 业务负载画像</h5><blockquote><p>谁导致了这个负载(eg PID, process name, UID, IP address)?<br>Why is the load called (code path, stack trace, flame graph)?<br>What is the load (IOPS, throughput, type)?<br>How is the load changing over time (per-interval summaries)?</p></blockquote><h5 id="3-2-2-下钻分析"><a href="#3-2-2-下钻分析" class="headerlink" title="3.2.2 下钻分析"></a>3.2.2 下钻分析</h5><blockquote><p>Start examining the highest level.<br>Examine next-level details.</p></blockquote><h5 id="3-2-3-USE方法论"><a href="#3-2-3-USE方法论" class="headerlink" title="3.2.3 USE方法论"></a>3.2.3 USE方法论</h5><blockquote><p>Utilization 使用率<br>Saturation 负载率<br>Errors 错误</p></blockquote><h5 id="3-2-4-检查清单法"><a href="#3-2-4-检查清单法" class="headerlink" title="3.2.4 检查清单法"></a>3.2.4 检查清单法</h5><blockquote></blockquote><h4 id="3-3-Linux-60s分析"><a href="#3-3-Linux-60s分析" class="headerlink" title="3.3 Linux 60s分析"></a>3.3 Linux 60s分析</h4><h5 id="3-3-1-uptime"><a href="#3-3-1-uptime" class="headerlink" title="3.3.1 uptime"></a>3.3.1 uptime</h5><h5 id="3-3-2-dmesg-tail"><a href="#3-3-2-dmesg-tail" class="headerlink" title="3.3.2 dmesg|tail"></a>3.3.2 dmesg|tail</h5><h5 id="3-3-3-vmstat-1"><a href="#3-3-3-vmstat-1" class="headerlink" title="3.3.3 vmstat 1"></a>3.3.3 vmstat 1</h5><h5 id="3-3-4-mpstat-P-ALL-1"><a href="#3-3-4-mpstat-P-ALL-1" class="headerlink" title="3.3.4 mpstat -P ALL 1"></a>3.3.4 mpstat -P ALL 1</h5><h5 id="3-3-5-pidstat-1"><a href="#3-3-5-pidstat-1" class="headerlink" title="3.3.5 pidstat 1"></a>3.3.5 pidstat 1</h5><h5 id="3-3-6-iostat-xz-1"><a href="#3-3-6-iostat-xz-1" class="headerlink" title="3.3.6 iostat -xz 1"></a>3.3.6 iostat -xz 1</h5><h5 id="3-3-7-free-m"><a href="#3-3-7-free-m" class="headerlink" title="3.3.7 free -m"></a>3.3.7 free -m</h5><h5 id="3-3-8-sar-n-DEV-1"><a href="#3-3-8-sar-n-DEV-1" class="headerlink" title="3.3.8 sar -n DEV 1"></a>3.3.8 sar -n DEV 1</h5><h5 id="3-3-9-sar-n-TCP-ETCP-1"><a href="#3-3-9-sar-n-TCP-ETCP-1" class="headerlink" title="3.3.9 sar -n TCP,ETCP 1"></a>3.3.9 sar -n TCP,ETCP 1</h5><h5 id="3-3-10-top"><a href="#3-3-10-top" class="headerlink" title="3.3.10 top"></a>3.3.10 top</h5><h4 id="3-4-BCC工具检查清单"><a href="#3-4-BCC工具检查清单" class="headerlink" title="3.4 BCC工具检查清单"></a>3.4 BCC工具检查清单</h4><h5 id="3-4-1-execsnoop"><a href="#3-4-1-execsnoop" class="headerlink" title="3.4.1 execsnoop"></a>3.4.1 execsnoop</h5><blockquote><p>统计系统调用exec<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># execsnoop</span></span><br><span class="line">PCOMM PID RET ARGS</span><br><span class="line">supervise <span class="number">9660</span> <span class="number">0</span> ./run</span><br><span class="line">supervise <span class="number">9661</span> <span class="number">0</span> ./run</span><br><span class="line">mkdir <span class="number">9662</span> <span class="number">0</span> /bin/mkdir -p ./main</span><br><span class="line">run <span class="number">9663</span> <span class="number">0</span> ./run</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="3-4-2-opensnoop"><a href="#3-4-2-opensnoop" class="headerlink" title="3.4.2 opensnoop"></a>3.4.2 opensnoop</h5><blockquote><p>统计系统调用open<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># opensnoop</span></span><br><span class="line">PID COMM FD ERR PATH</span><br><span class="line"><span class="number">1565</span> redis-server <span class="number">5</span> <span class="number">0</span> /proc/<span class="number">1565</span>/stat</span><br><span class="line"><span class="number">1603</span> snmpd <span class="number">9</span> <span class="number">0</span> /proc/net/dev</span><br><span class="line"><span class="number">1603</span> snmpd <span class="number">11</span> <span class="number">0</span> /proc/net/if_inet6</span><br><span class="line"><span class="number">1603</span> snmpd <span class="number">-1</span> <span class="number">2</span> /sys/<span class="class"><span class="keyword">class</span>/<span class="title">net</span>/<span class="title">eth0</span>/<span class="title">device</span>/<span class="title">vendor</span></span></span><br><span class="line"><span class="class">1603 <span class="title">snmpd</span> 11 0 /<span class="title">proc</span>/<span class="title">sys</span>/<span class="title">net</span>/<span class="title">ipv4</span>/<span class="title">neigh</span>/<span class="title">eth0</span>/<span class="title">retrans_time_ms</span></span></span><br><span class="line"><span class="class">1603 <span class="title">snmpd</span> 11 0 /<span class="title">proc</span>/<span class="title">sys</span>/<span class="title">net</span>/<span class="title">ipv6</span>/<span class="title">neigh</span>/<span class="title">eth0</span>/<span class="title">retrans_time</span></span></span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="3-4-3-ext4slower"><a href="#3-4-3-ext4slower" class="headerlink" title="3.4.3 ext4slower"></a>3.4.3 ext4slower</h5><blockquote><p>统计ext4文件系统<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># ext4slower</span><br><span class="line">Tracing ext4 operations slower than <span class="number">10</span> ms</span><br><span class="line"><span class="function">TIME COMM PID T BYTES OFF_KB <span class="title">LAT</span><span class="params">(ms)</span> FILENAME</span></span><br><span class="line">06:35:01 cron 16464 R 1249 0 16.05 common-auth</span><br><span class="line"><span class="number">06</span>:<span class="number">35</span>:<span class="number">01</span> cron <span class="number">16463</span> R <span class="number">1249</span> <span class="number">0</span> <span class="number">16.04</span> common-auth</span><br><span class="line"><span class="number">06</span>:<span class="number">35</span>:<span class="number">01</span> cron <span class="number">16465</span> R <span class="number">1249</span> <span class="number">0</span> <span class="number">16.03</span> common-auth</span><br><span class="line"><span class="number">06</span>:<span class="number">35</span>:<span class="number">01</span> cron <span class="number">16465</span> R <span class="number">4096</span> <span class="number">0</span> <span class="number">10.62</span> login.defs</span><br><span class="line"><span class="number">06</span>:<span class="number">35</span>:<span class="number">01</span> cron <span class="number">16464</span> R <span class="number">4096</span> <span class="number">0</span> <span class="number">10.61</span> login.defs</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="3-4-4-biolatency"><a href="#3-4-4-biolatency" class="headerlink" title="3.4.4 biolatency"></a>3.4.4 biolatency</h5><blockquote><p>bio延迟直方图<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># biolatency -m</span></span><br><span class="line">Tracing block device I/O... Hit Ctrl-C to end.</span><br><span class="line">^C</span><br><span class="line">msecs : count distribution</span><br><span class="line"><span class="number">0</span> -&gt; <span class="number">1</span> : <span class="number">16335</span> |****************************************|</span><br><span class="line"><span class="number">2</span> -&gt; <span class="number">3</span> : <span class="number">2272</span> |***** |</span><br><span class="line"><span class="number">4</span> -&gt; <span class="number">7</span> : <span class="number">3603</span> |******** |</span><br><span class="line"><span class="number">8</span> -&gt; <span class="number">15</span> : <span class="number">4328</span> |********** |</span><br><span class="line"><span class="number">16</span> -&gt; <span class="number">31</span> : <span class="number">3379</span> |******** |</span><br><span class="line"><span class="number">32</span> -&gt; <span class="number">63</span> : <span class="number">5815</span> |************** |</span><br><span class="line"><span class="number">64</span> -&gt; <span class="number">127</span> : <span class="number">0</span> | |</span><br><span class="line"><span class="number">128</span> -&gt; <span class="number">255</span> : <span class="number">0</span> | |</span><br><span class="line"><span class="number">256</span> -&gt; <span class="number">511</span> : <span class="number">0</span> | |</span><br><span class="line"><span class="number">512</span> -&gt; <span class="number">1023</span> : <span class="number">1</span> | |</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="3-4-5-biosnoop"><a href="#3-4-5-biosnoop" class="headerlink" title="3.4.5 biosnoop"></a>3.4.5 biosnoop</h5><blockquote><p>bio size直方图<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># biosnoop</span></span><br><span class="line">TIME(s) <span class="function">COMM PID DISK T SECTOR BYTES <span class="title">LAT</span><span class="params">(ms)</span></span></span><br><span class="line">0.000004001 supervise 1950 xvda1 W 13092560 4096 0.74</span><br><span class="line"><span class="number">0.000178002</span> supervise <span class="number">1950</span> xvda1 W <span class="number">13092432</span> <span class="number">4096</span> <span class="number">0.61</span></span><br><span class="line"><span class="number">0.001469001</span> supervise <span class="number">1956</span> xvda1 W <span class="number">13092440</span> <span class="number">4096</span> <span class="number">1.24</span></span><br><span class="line"><span class="number">0.001588002</span> supervise <span class="number">1956</span> xvda1 W <span class="number">13115128</span> <span class="number">4096</span> <span class="number">1.09</span></span><br><span class="line"><span class="number">1.022346001</span> supervise <span class="number">1950</span> xvda1 W <span class="number">13115272</span> <span class="number">4096</span> <span class="number">0.98</span></span><br><span class="line">[...]</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="3-4-6-cachestat"><a href="#3-4-6-cachestat" class="headerlink" title="3.4.6 cachestat"></a>3.4.6 cachestat</h5><blockquote><p>统计文件系统缓存<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># cachestat</span></span><br><span class="line">HITS MISSES DIRTIES HITRATIO BUFFERS_MB CACHED_MB</span><br><span class="line"><span class="number">53401</span> <span class="number">2755</span> <span class="number">20953</span> <span class="number">95.09</span>% <span class="number">14</span> <span class="number">90223</span></span><br><span class="line"><span class="number">49599</span> <span class="number">4098</span> <span class="number">21460</span> <span class="number">92.37</span>% <span class="number">14</span> <span class="number">90230</span></span><br><span class="line"><span class="number">16601</span> <span class="number">2689</span> <span class="number">61329</span> <span class="number">86.06</span>% <span class="number">14</span> <span class="number">90381</span></span><br><span class="line"><span class="number">15197</span> <span class="number">2477</span> <span class="number">58028</span> <span class="number">85.99</span>% <span class="number">14</span> <span class="number">90522</span></span><br><span class="line">[...]</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="3-4-7-tcpconnect"><a href="#3-4-7-tcpconnect" class="headerlink" title="3.4.7 tcpconnect"></a>3.4.7 tcpconnect</h5><blockquote><p>统计系统调用connect<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># tcpconnect</span></span><br><span class="line">PID COMM IP SADDR DADDR DPORT</span><br><span class="line"><span class="number">1479</span> telnet <span class="number">4</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">23</span></span><br><span class="line"><span class="number">1469</span> curl <span class="number">4</span> <span class="number">10.201</span><span class="number">.219</span><span class="number">.236</span> <span class="number">54.245</span><span class="number">.105</span><span class="number">.25</span> <span class="number">80</span></span><br><span class="line"><span class="number">1469</span> curl <span class="number">4</span> <span class="number">10.201</span><span class="number">.219</span><span class="number">.236</span> <span class="number">54.67</span><span class="number">.101</span><span class="number">.145</span> <span class="number">80</span></span><br><span class="line"><span class="number">1991</span> telnet <span class="number">6</span> ::<span class="number">1</span> ::<span class="number">1</span> <span class="number">23</span></span><br><span class="line"><span class="number">2015</span> ssh <span class="number">6</span> fe80::<span class="number">2000</span>:bff:fe82:<span class="number">3</span>ac fe80::<span class="number">2000</span>:bff:fe82:<span class="number">3</span>ac <span class="number">22</span></span><br><span class="line">[...]</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="3-4-8-tcpaccept"><a href="#3-4-8-tcpaccept" class="headerlink" title="3.4.8 tcpaccept"></a>3.4.8 tcpaccept</h5><blockquote><p>统计系统调用accept<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># tcpaccept</span></span><br><span class="line">PID COMM IP RADDR LADDR LPORT</span><br><span class="line"><span class="number">907</span> sshd <span class="number">4</span> <span class="number">192.168</span><span class="number">.56</span><span class="number">.1</span> <span class="number">192.168</span><span class="number">.56</span><span class="number">.102</span> <span class="number">22</span></span><br><span class="line"><span class="number">907</span> sshd <span class="number">4</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">22</span></span><br><span class="line"><span class="number">5389</span> perl <span class="number">6</span> <span class="number">1234</span>:ab12:<span class="number">2040</span>:<span class="number">5020</span>:<span class="number">2299</span>:<span class="number">0</span>:<span class="number">5</span>:<span class="number">0</span> <span class="number">1234</span>:ab12:<span class="number">2040</span>:<span class="number">5020</span>:<span class="number">2299</span>:<span class="number">0</span>:<span class="number">5</span>:<span class="number">0</span> <span class="number">7001</span></span><br><span class="line">[...]</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="3-4-9-tcpretrans"><a href="#3-4-9-tcpretrans" class="headerlink" title="3.4.9 tcpretrans"></a>3.4.9 tcpretrans</h5><blockquote><p>tcp重传统计<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># tcpretrans</span></span><br><span class="line">TIME PID IP LADDR:LPORT T&gt; RADDR:RPORT STATE</span><br><span class="line"><span class="number">01</span>:<span class="number">55</span>:<span class="number">05</span> <span class="number">0</span> <span class="number">4</span> <span class="number">10.153</span><span class="number">.223</span><span class="number">.157</span>:<span class="number">22</span> R&gt; <span class="number">69.53</span><span class="number">.245</span><span class="number">.40</span>:<span class="number">34619</span> ESTABLISHED</span><br><span class="line"><span class="number">01</span>:<span class="number">55</span>:<span class="number">05</span> <span class="number">0</span> <span class="number">4</span> <span class="number">10.153</span><span class="number">.223</span><span class="number">.157</span>:<span class="number">22</span> R&gt; <span class="number">69.53</span><span class="number">.245</span><span class="number">.40</span>:<span class="number">34619</span> ESTABLISHED</span><br><span class="line"><span class="number">01</span>:<span class="number">55</span>:<span class="number">17</span> <span class="number">0</span> <span class="number">4</span> <span class="number">10.153</span><span class="number">.223</span><span class="number">.157</span>:<span class="number">22</span> R&gt; <span class="number">69.53</span><span class="number">.245</span><span class="number">.40</span>:<span class="number">22957</span> ESTABLISHED</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="3-4-10-runqlat"><a href="#3-4-10-runqlat" class="headerlink" title="3.4.10 runqlat"></a>3.4.10 runqlat</h5><blockquote><p>cpu上运行队列统计<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># runqlat</span></span><br><span class="line">Tracing run <span class="built_in">queue</span> latency... Hit Ctrl-C to end.</span><br><span class="line">^C</span><br><span class="line">usecs : count distribution</span><br><span class="line"><span class="number">0</span> -&gt; <span class="number">1</span> : <span class="number">233</span> |*********** |</span><br><span class="line"><span class="number">2</span> -&gt; <span class="number">3</span> : <span class="number">742</span> |************************************ |</span><br><span class="line"><span class="number">4</span> -&gt; <span class="number">7</span> : <span class="number">203</span> |********** |</span><br><span class="line"><span class="number">8</span> -&gt; <span class="number">15</span> : <span class="number">173</span> |******** |</span><br><span class="line"><span class="number">16</span> -&gt; <span class="number">31</span> : <span class="number">24</span> |* |</span><br><span class="line"><span class="number">32</span> -&gt; <span class="number">63</span> : <span class="number">0</span> | |</span><br><span class="line"><span class="number">64</span> -&gt; <span class="number">127</span> : <span class="number">30</span> |* |</span><br><span class="line"><span class="number">128</span> -&gt; <span class="number">255</span> : <span class="number">6</span> | |</span><br><span class="line"><span class="number">256</span> -&gt; <span class="number">511</span> : <span class="number">3</span> | |</span><br><span class="line"><span class="number">512</span> -&gt; <span class="number">1023</span> : <span class="number">5</span> | |</span><br><span class="line"><span class="number">1024</span> -&gt; <span class="number">2047</span> : <span class="number">27</span> |* |</span><br><span class="line"><span class="number">2048</span> -&gt; <span class="number">4095</span> : <span class="number">30</span> |* |</span><br><span class="line"><span class="number">4096</span> -&gt; <span class="number">8191</span> : <span class="number">20</span> | |</span><br><span class="line"><span class="number">8192</span> -&gt; <span class="number">16383</span> : <span class="number">29</span> |* |</span><br><span class="line"><span class="number">16384</span> -&gt; <span class="number">32767</span> : <span class="number">809</span> |****************************************|</span><br><span class="line"><span class="number">32768</span> -&gt; <span class="number">65535</span> : <span class="number">64</span> |*** |</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="3-4-11-profile"><a href="#3-4-11-profile" class="headerlink" title="3.4.11 profile"></a>3.4.11 profile</h5><blockquote><p>采集CPU<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># profile</span></span><br><span class="line">Sampling at <span class="number">49</span> Hertz of all threads by user + kernel <span class="built_in">stack</span>... Hit Ctrl-C to end.</span><br><span class="line">^C</span><br><span class="line">[...]</span><br><span class="line">copy_user_enhanced_fast_string</span><br><span class="line">copy_user_enhanced_fast_string</span><br><span class="line">_copy_from_iter_full</span><br><span class="line">tcp_sendmsg_locked</span><br><span class="line">tcp_sendmsg</span><br><span class="line">inet_sendmsg</span><br><span class="line">sock_sendmsg</span><br><span class="line">sock_write_iter</span><br><span class="line">new_sync_write</span><br><span class="line">__vfs_write</span><br><span class="line">vfs_write</span><br><span class="line">SyS_write</span><br><span class="line">do_syscall_64</span><br><span class="line">entry_SYSCALL_64_after_hwframe</span><br><span class="line">[unknown]</span><br><span class="line">[unknown]</span><br><span class="line">- iperf (<span class="number">24092</span>)</span><br><span class="line"><span class="number">58</span></span><br></pre></td></tr></table></figure><p></p></blockquote><h4 id="第四章"><a href="#第四章" class="headerlink" title="第四章"></a>第四章</h4><h5 id="4-1-BCC的组件"><a href="#4-1-BCC的组件" class="headerlink" title="4.1 BCC的组件"></a>4.1 BCC的组件</h5><blockquote></blockquote><h5 id="4-2-BCC的特性"><a href="#4-2-BCC的特性" class="headerlink" title="4.2 BCC的特性"></a>4.2 BCC的特性</h5><blockquote></blockquote><h5 id="4-3-安装BCC"><a href="#4-3-安装BCC" class="headerlink" title="4.3 安装BCC"></a>4.3 安装BCC</h5><blockquote></blockquote><h5 id="4-4-BCC的工具"><a href="#4-4-BCC的工具" class="headerlink" title="4.4 BCC的工具"></a>4.4 BCC的工具</h5><blockquote></blockquote><h5 id="4-5-funccount"><a href="#4-5-funccount" class="headerlink" title="4.5 funccount"></a>4.5 funccount</h5><blockquote><p>统计指定函数调用次数</p></blockquote><h5 id="4-6-stackcount"><a href="#4-6-stackcount" class="headerlink" title="4.6 stackcount"></a>4.6 stackcount</h5><blockquote><p>统计栈调用次数<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="4-7-trace"><a href="#4-7-trace" class="headerlink" title="4.7 trace"></a>4.7 trace</h5><blockquote><p>用于跟踪和调试应用程序的执行过程<br></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id="4-8-argdist"><a href="#4-8-argdist" class="headerlink" title="4.8 argdist"></a>4.8 argdist</h5><blockquote><p>函数参数分布统计</p></blockquote><h5 id="4-9-工具文档"><a href="#4-9-工具文档" class="headerlink" title="4.9 工具文档"></a>4.9 工具文档</h5><h6 id="4-9-1-Man-Page-opensnoop"><a href="#4-9-1-Man-Page-opensnoop" class="headerlink" title="4.9.1 Man Page: opensnoop"></a>4.9.1 Man Page: opensnoop</h6><blockquote></blockquote><h6 id="4-9-2-Examples-File-opensnoop"><a href="#4-9-2-Examples-File-opensnoop" class="headerlink" title="4.9.2 Examples File: opensnoop"></a>4.9.2 Examples File: opensnoop</h6><h5 id="4-10-开发BCC工具"><a href="#4-10-开发BCC工具" class="headerlink" title="4.10 开发BCC工具"></a>4.10 开发BCC工具</h5><blockquote></blockquote><h5 id="4-11-BCC的内部实现"><a href="#4-11-BCC的内部实现" class="headerlink" title="4.11 BCC的内部实现"></a>4.11 BCC的内部实现</h5><blockquote></blockquote><h5 id="4-12-BCC的调试"><a href="#4-12-BCC的调试" class="headerlink" title="4.12 BCC的调试"></a>4.12 BCC的调试</h5><h6 id="4-12-1-printf-Debugging"><a href="#4-12-1-printf-Debugging" class="headerlink" title="4.12.1 printf() Debugging"></a>4.12.1 printf() Debugging</h6><h6 id="4-12-2-BCC-Debug-output"><a href="#4-12-2-BCC-Debug-output" class="headerlink" title="4.12.2 BCC Debug output"></a>4.12.2 BCC Debug output</h6><h6 id="4-12-3-BCC-Debug-Flag"><a href="#4-12-3-BCC-Debug-Flag" class="headerlink" title="4.12.3 BCC Debug Flag"></a>4.12.3 BCC Debug Flag</h6><h6 id="4-12-4-bpflist"><a href="#4-12-4-bpflist" class="headerlink" title="4.12.4 bpflist"></a>4.12.4 bpflist</h6><h6 id="4-12-5-bpftool"><a href="#4-12-5-bpftool" class="headerlink" title="4.12.5 bpftool"></a>4.12.5 bpftool</h6><h6 id="4-12-6-dmesg"><a href="#4-12-6-dmesg" class="headerlink" title="4.12.6 dmesg"></a>4.12.6 dmesg</h6><h6 id="4-12-7-Resetting-Events"><a href="#4-12-7-Resetting-Events" class="headerlink" title="4.12.7 Resetting Events"></a>4.12.7 Resetting Events</h6><h4 id="4-13-Summary"><a href="#4-13-Summary" class="headerlink" title="4.13 Summary"></a>4.13 Summary</h4><blockquote></blockquote><h4 id="第五章"><a href="#第五章" class="headerlink" title="第五章"></a>第五章</h4><h5 id="5-1-bpftrace的组件"><a href="#5-1-bpftrace的组件" class="headerlink" title="5.1 bpftrace的组件"></a>5.1 bpftrace的组件</h5><blockquote></blockquote><h5 id="5-2-bpftrace的特性"><a href="#5-2-bpftrace的特性" class="headerlink" title="5.2 bpftrace的特性"></a>5.2 bpftrace的特性</h5><h6 id="5-2-1-bpftrace-Event-Sources"><a href="#5-2-1-bpftrace-Event-Sources" class="headerlink" title="5.2.1 bpftrace Event Sources"></a>5.2.1 bpftrace Event Sources</h6><h6 id="5-2-2-bpftrace-Actions"><a href="#5-2-2-bpftrace-Actions" class="headerlink" title="5.2.2 bpftrace Actions"></a>5.2.2 bpftrace Actions</h6><h6 id="5-2-3-bpftrace-General-Features"><a href="#5-2-3-bpftrace-General-Features" class="headerlink" title="5.2.3 bpftrace General Features"></a>5.2.3 bpftrace General Features</h6><h6 id="5-2-4-bpftrace-Compared-to-Other-Observability-Tools"><a href="#5-2-4-bpftrace-Compared-to-Other-Observability-Tools" class="headerlink" title="5.2.4 bpftrace Compared to Other Observability Tools"></a>5.2.4 bpftrace Compared to Other Observability Tools</h6><blockquote></blockquote><h5 id="5-3-bpftrace的安装"><a href="#5-3-bpftrace的安装" class="headerlink" title="5.3 bpftrace的安装"></a>5.3 bpftrace的安装</h5><h6 id="5-3-1-Kernel-Requirements"><a href="#5-3-1-Kernel-Requirements" class="headerlink" title="5.3.1 Kernel Requirements"></a>5.3.1 Kernel Requirements</h6><h6 id="5-3-2-Ubuntu"><a href="#5-3-2-Ubuntu" class="headerlink" title="5.3.2 Ubuntu"></a>5.3.2 Ubuntu</h6><h6 id="5-3-3-Fedora"><a href="#5-3-3-Fedora" class="headerlink" title="5.3.3 Fedora"></a>5.3.3 Fedora</h6><h6 id="5-3-4-Post-Build-Steps"><a href="#5-3-4-Post-Build-Steps" class="headerlink" title="5.3.4 Post-Build Steps"></a>5.3.4 Post-Build Steps</h6><h6 id="5-3-5-Other-Distributions"><a href="#5-3-5-Other-Distributions" class="headerlink" title="5.3.5 Other Distributions"></a>5.3.5 Other Distributions</h6><blockquote></blockquote><h5 id="5-4-bpftrace工具"><a href="#5-4-bpftrace工具" class="headerlink" title="5.4 bpftrace工具"></a>5.4 bpftrace工具</h5><h6 id="5-4-1-Highlighted-Tools"><a href="#5-4-1-Highlighted-Tools" class="headerlink" title="5.4.1 Highlighted Tools"></a>5.4.1 Highlighted Tools</h6><h6 id="5-4-2-Tool-Characteristics"><a href="#5-4-2-Tool-Characteristics" class="headerlink" title="5.4.2 Tool Characteristics"></a>5.4.2 Tool Characteristics</h6><h6 id="5-4-3-Tool-Execution"><a href="#5-4-3-Tool-Execution" class="headerlink" title="5.4.3 Tool Execution"></a>5.4.3 Tool Execution</h6><blockquote></blockquote><h5 id="5-5-bpftrace单行程序"><a href="#5-5-bpftrace单行程序" class="headerlink" title="5.5 bpftrace单行程序"></a>5.5 bpftrace单行程序</h5><blockquote></blockquote><h5 id="5-6-bpftrace的文档"><a href="#5-6-bpftrace的文档" class="headerlink" title="5.6 bpftrace的文档"></a>5.6 bpftrace的文档</h5><blockquote></blockquote><h5 id="5-7-bpftrace编程"><a href="#5-7-bpftrace编程" class="headerlink" title="5.7 bpftrace编程"></a>5.7 bpftrace编程</h5><h6 id="5-7-1-Usage"><a href="#5-7-1-Usage" class="headerlink" title="5.7.1 Usage"></a>5.7.1 Usage</h6><h6 id="5-7-2-Program-Structure"><a href="#5-7-2-Program-Structure" class="headerlink" title="5.7.2 Program Structure"></a>5.7.2 Program Structure</h6><h6 id="5-7-3-Comments"><a href="#5-7-3-Comments" class="headerlink" title="5.7.3 Comments"></a>5.7.3 Comments</h6><h6 id="5-7-4-Probe-Format"><a href="#5-7-4-Probe-Format" class="headerlink" title="5.7.4 Probe Format"></a>5.7.4 Probe Format</h6><h6 id="5-7-5-Probe-Wildcards"><a href="#5-7-5-Probe-Wildcards" class="headerlink" title="5.7.5 Probe Wildcards"></a>5.7.5 Probe Wildcards</h6><h6 id="5-7-6-Filters"><a href="#5-7-6-Filters" class="headerlink" title="5.7.6 Filters"></a>5.7.6 Filters</h6><h6 id="5-7-7-Actions"><a href="#5-7-7-Actions" class="headerlink" title="5.7.7 Actions"></a>5.7.7 Actions</h6><h6 id="5-7-8-Hello-World"><a href="#5-7-8-Hello-World" class="headerlink" title="5.7.8 Hello, World!"></a>5.7.8 Hello, World!</h6><h6 id="5-7-9-Functions"><a href="#5-7-9-Functions" class="headerlink" title="5.7.9 Functions"></a>5.7.9 Functions</h6><h6 id="5-7-10-Variables"><a href="#5-7-10-Variables" class="headerlink" title="5.7.10 Variables"></a>5.7.10 Variables</h6><h6 id="5-7-11-Map-Functions"><a href="#5-7-11-Map-Functions" class="headerlink" title="5.7.11 Map Functions"></a>5.7.11 Map Functions</h6><h6 id="5-7-12-Timing-vfs-read"><a href="#5-7-12-Timing-vfs-read" class="headerlink" title="5.7.12 Timing vfs_read()"></a>5.7.12 Timing vfs_read()</h6><blockquote></blockquote><h5 id="5-8-bpftrace的帮助信息"><a href="#5-8-bpftrace的帮助信息" class="headerlink" title="5.8 bpftrace的帮助信息"></a>5.8 bpftrace的帮助信息</h5><blockquote></blockquote><h5 id="5-9-bpftrace的探针类型"><a href="#5-9-bpftrace的探针类型" class="headerlink" title="5.9 bpftrace的探针类型"></a>5.9 bpftrace的探针类型</h5><h6 id="5-9-1-tracepoint"><a href="#5-9-1-tracepoint" class="headerlink" title="5.9.1 tracepoint"></a>5.9.1 tracepoint</h6><h6 id="5-9-2-usdt"><a href="#5-9-2-usdt" class="headerlink" title="5.9.2 usdt"></a>5.9.2 usdt</h6><h6 id="5-9-3-kprobe-and-kretprobe"><a href="#5-9-3-kprobe-and-kretprobe" class="headerlink" title="5.9.3 kprobe and kretprobe"></a>5.9.3 kprobe and kretprobe</h6><h6 id="5-9-4-uprobe-and-uretprobe"><a href="#5-9-4-uprobe-and-uretprobe" class="headerlink" title="5.9.4 uprobe and uretprobe"></a>5.9.4 uprobe and uretprobe</h6><h6 id="5-9-5-software-and-hardware"><a href="#5-9-5-software-and-hardware" class="headerlink" title="5.9.5 software and hardware"></a>5.9.5 software and hardware</h6><h6 id="5-9-6-profile-and-interval"><a href="#5-9-6-profile-and-interval" class="headerlink" title="5.9.6 profile and interval"></a>5.9.6 profile and interval</h6><blockquote></blockquote><h5 id="5-10-bpftrace的控制流"><a href="#5-10-bpftrace的控制流" class="headerlink" title="5.10 bpftrace的控制流"></a>5.10 bpftrace的控制流</h5><h6 id="5-10-1-Filter"><a href="#5-10-1-Filter" class="headerlink" title="5.10.1 Filter"></a>5.10.1 Filter</h6><h6 id="5-10-2-Ternary-Operators"><a href="#5-10-2-Ternary-Operators" class="headerlink" title="5.10.2 Ternary Operators"></a>5.10.2 Ternary Operators</h6><h6 id="5-10-3-If-Statements"><a href="#5-10-3-If-Statements" class="headerlink" title="5.10.3 If Statements"></a>5.10.3 If Statements</h6><h6 id="5-10-4-Unrolled-Loops"><a href="#5-10-4-Unrolled-Loops" class="headerlink" title="5.10.4 Unrolled Loops"></a>5.10.4 Unrolled Loops</h6><h6 id="5-13-3-str"><a href="#5-13-3-str" class="headerlink" title="5.13.3 str()"></a>5.13.3 str()</h6><blockquote></blockquote><h5 id="5-11-bpftrace的运算符"><a href="#5-11-bpftrace的运算符" class="headerlink" title="5.11 bpftrace的运算符"></a>5.11 bpftrace的运算符</h5><blockquote></blockquote><h5 id="5-12-bpftrace的变量"><a href="#5-12-bpftrace的变量" class="headerlink" title="5.12 bpftrace的变量"></a>5.12 bpftrace的变量</h5><h6 id="5-12-1-Built-in-Variables"><a href="#5-12-1-Built-in-Variables" class="headerlink" title="5.12.1 Built-in Variables"></a>5.12.1 Built-in Variables</h6><h6 id="5-12-2-Built-ins-pid-comm-and-uid"><a href="#5-12-2-Built-ins-pid-comm-and-uid" class="headerlink" title="5.12.2 Built-ins: pid, comm, and uid"></a>5.12.2 Built-ins: pid, comm, and uid</h6><h6 id="5-12-3-Built-ins-kstack-and-ustack"><a href="#5-12-3-Built-ins-kstack-and-ustack" class="headerlink" title="5.12.3 Built-ins: kstack and ustack"></a>5.12.3 Built-ins: kstack and ustack</h6><h6 id="5-12-4-Built-ins-Positional-Parameters"><a href="#5-12-4-Built-ins-Positional-Parameters" class="headerlink" title="5.12.4 Built-ins: Positional Parameters"></a>5.12.4 Built-ins: Positional Parameters</h6><h6 id="5-12-5-Scratch"><a href="#5-12-5-Scratch" class="headerlink" title="5.12.5 Scratch"></a>5.12.5 Scratch</h6><h6 id="5-12-6-Maps"><a href="#5-12-6-Maps" class="headerlink" title="5.12.6 Maps"></a>5.12.6 Maps</h6><blockquote></blockquote><h5 id="5-13-bpftrace的函数"><a href="#5-13-bpftrace的函数" class="headerlink" title="5.13 bpftrace的函数"></a>5.13 bpftrace的函数</h5><h6 id="5-13-1-printf"><a href="#5-13-1-printf" class="headerlink" title="5.13.1 printf()"></a>5.13.1 printf()</h6><h6 id="5-13-2-join"><a href="#5-13-2-join" class="headerlink" title="5.13.2 join()"></a>5.13.2 join()</h6><h6 id="5-13-3-str-1"><a href="#5-13-3-str-1" class="headerlink" title="5.13.3 str()"></a>5.13.3 str()</h6><h6 id="5-13-4-kstack-and-ustack"><a href="#5-13-4-kstack-and-ustack" class="headerlink" title="5.13.4 kstack() and ustack()"></a>5.13.4 kstack() and ustack()</h6><h6 id="5-13-5-ksym-and-usym"><a href="#5-13-5-ksym-and-usym" class="headerlink" title="5.13.5 ksym() and usym()"></a>5.13.5 ksym() and usym()</h6><h6 id="5-13-6-kaddr-and-uaddr"><a href="#5-13-6-kaddr-and-uaddr" class="headerlink" title="5.13.6 kaddr() and uaddr()"></a>5.13.6 kaddr() and uaddr()</h6><h6 id="5-13-7-system"><a href="#5-13-7-system" class="headerlink" title="5.13.7 system()"></a>5.13.7 system()</h6><h6 id="5-13-8-exit"><a href="#5-13-8-exit" class="headerlink" title="5.13.8 exit()"></a>5.13.8 exit()</h6><blockquote></blockquote><h5 id="5-14-bpftrace映射表的操作函数"><a href="#5-14-bpftrace映射表的操作函数" class="headerlink" title="5.14 bpftrace映射表的操作函数"></a>5.14 bpftrace映射表的操作函数</h5><h6 id="5-14-1-count"><a href="#5-14-1-count" class="headerlink" title="5.14.1 count()"></a>5.14.1 count()</h6><h6 id="5-14-2-sum-avg-min-and-max"><a href="#5-14-2-sum-avg-min-and-max" class="headerlink" title="5.14.2 sum(), avg(), min(), and max()"></a>5.14.2 sum(), avg(), min(), and max()</h6><h6 id="5-14-3-hist"><a href="#5-14-3-hist" class="headerlink" title="5.14.3 hist()"></a>5.14.3 hist()</h6><h6 id="5-14-4-lhist"><a href="#5-14-4-lhist" class="headerlink" title="5.14.4 lhist()"></a>5.14.4 lhist()</h6><h6 id="5-14-5-delete"><a href="#5-14-5-delete" class="headerlink" title="5.14.5 delete()"></a>5.14.5 delete()</h6><h6 id="5-14-6-clear-and-zero"><a href="#5-14-6-clear-and-zero" class="headerlink" title="5.14.6 clear() and zero()"></a>5.14.6 clear() and zero()</h6><h6 id="5-14-7-print"><a href="#5-14-7-print" class="headerlink" title="5.14.7 print()"></a>5.14.7 print()</h6><blockquote></blockquote><h5 id="5-15-bpftrace的下一步工作"><a href="#5-15-bpftrace的下一步工作" class="headerlink" title="5.15 bpftrace的下一步工作"></a>5.15 bpftrace的下一步工作</h5><h6 id="5-15-1-Explicit-Address-Modes"><a href="#5-15-1-Explicit-Address-Modes" class="headerlink" title="5.15.1 Explicit Address Modes"></a>5.15.1 Explicit Address Modes</h6><h6 id="5-15-2-Other-Additions"><a href="#5-15-2-Other-Additions" class="headerlink" title="5.15.2 Other Additions"></a>5.15.2 Other Additions</h6><h6 id="5-15-3-ply"><a href="#5-15-3-ply" class="headerlink" title="5.15.3 ply"></a>5.15.3 ply</h6><blockquote></blockquote><h5 id="5-16-bpftrace的内部运作"><a href="#5-16-bpftrace的内部运作" class="headerlink" title="5.16 bpftrace的内部运作"></a>5.16 bpftrace的内部运作</h5><blockquote></blockquote><h5 id="5-17-bpftrace的调试"><a href="#5-17-bpftrace的调试" class="headerlink" title="5.17 bpftrace的调试"></a>5.17 bpftrace的调试</h5><h6 id="5-17-1-printf-Debugging"><a href="#5-17-1-printf-Debugging" class="headerlink" title="5.17.1 printf() Debugging"></a>5.17.1 printf() Debugging</h6><h6 id="5-17-2-Debug-Mode"><a href="#5-17-2-Debug-Mode" class="headerlink" title="5.17.2 Debug Mode"></a>5.17.2 Debug Mode</h6><h6 id="5-17-3-Verbose-Mode"><a href="#5-17-3-Verbose-Mode" class="headerlink" title="5.17.3 Verbose Mode"></a>5.17.3 Verbose Mode</h6><blockquote></blockquote><h5 id="5-18-Summary"><a href="#5-18-Summary" class="headerlink" title="5.18 Summary"></a>5.18 Summary</h5><h4 id="第六章-CPU"><a href="#第六章-CPU" class="headerlink" title="第六章 CPU"></a>第六章 CPU</h4><h5 id="6-1-背景知识"><a href="#6-1-背景知识" class="headerlink" title="6.1 背景知识"></a>6.1 背景知识</h5><h6 id="6-1-1-CPU-Fundamentals"><a href="#6-1-1-CPU-Fundamentals" class="headerlink" title="6.1.1 CPU Fundamentals"></a>6.1.1 CPU Fundamentals</h6><h6 id="6-1-2-BPF-Capabilities"><a href="#6-1-2-BPF-Capabilities" class="headerlink" title="6.1.2 BPF Capabilities"></a>6.1.2 BPF Capabilities</h6><h6 id="6-1-3-Strategy"><a href="#6-1-3-Strategy" class="headerlink" title="6.1.3 Strategy"></a>6.1.3 Strategy</h6><blockquote></blockquote><h5 id="6-2-传统工具"><a href="#6-2-传统工具" class="headerlink" title="6.2 传统工具"></a>6.2 传统工具</h5><h6 id="6-2-1-Kernel-Statistics"><a href="#6-2-1-Kernel-Statistics" class="headerlink" title="6.2.1 Kernel Statistics"></a>6.2.1 Kernel Statistics</h6><h6 id="6-2-2-Hardware-Statistics"><a href="#6-2-2-Hardware-Statistics" class="headerlink" title="6.2.2 Hardware Statistics"></a>6.2.2 Hardware Statistics</h6><h6 id="6-2-3-Hardware-Sampling"><a href="#6-2-3-Hardware-Sampling" class="headerlink" title="6.2.3 Hardware Sampling"></a>6.2.3 Hardware Sampling</h6><h6 id="6-2-4-Timed-Sampling"><a href="#6-2-4-Timed-Sampling" class="headerlink" title="6.2.4 Timed Sampling"></a>6.2.4 Timed Sampling</h6><h6 id="6-2-5-Event-Statistics-and-Tracing"><a href="#6-2-5-Event-Statistics-and-Tracing" class="headerlink" title="6.2.5 Event Statistics and Tracing"></a>6.2.5 Event Statistics and Tracing</h6><blockquote></blockquote><h5 id="6-3-BPF工具"><a href="#6-3-BPF工具" class="headerlink" title="6.3 BPF工具"></a>6.3 BPF工具</h5><h6 id="6-3-1-execsnoop"><a href="#6-3-1-execsnoop" class="headerlink" title="6.3.1 execsnoop"></a>6.3.1 execsnoop</h6><h6 id="6-3-2-exitsnoop"><a href="#6-3-2-exitsnoop" class="headerlink" title="6.3.2 exitsnoop"></a>6.3.2 exitsnoop</h6><h6 id="6-3-3-runqlat"><a href="#6-3-3-runqlat" class="headerlink" title="6.3.3 runqlat"></a>6.3.3 runqlat</h6><h6 id="6-3-4-runqlen"><a href="#6-3-4-runqlen" class="headerlink" title="6.3.4 runqlen"></a>6.3.4 runqlen</h6><h6 id="6-3-5-runqslower"><a href="#6-3-5-runqslower" class="headerlink" title="6.3.5 runqslower"></a>6.3.5 runqslower</h6><h6 id="6-3-6-cpudist"><a href="#6-3-6-cpudist" class="headerlink" title="6.3.6 cpudist"></a>6.3.6 cpudist</h6><h6 id="6-3-7-cpufreq"><a href="#6-3-7-cpufreq" class="headerlink" title="6.3.7 cpufreq"></a>6.3.7 cpufreq</h6><h6 id="6-3-8-profile"><a href="#6-3-8-profile" class="headerlink" title="6.3.8 profile"></a>6.3.8 profile</h6><h6 id="6-3-9-offcputime"><a href="#6-3-9-offcputime" class="headerlink" title="6.3.9 offcputime"></a>6.3.9 offcputime</h6><h6 id="6-3-10-syscount"><a href="#6-3-10-syscount" class="headerlink" title="6.3.10 syscount"></a>6.3.10 syscount</h6><h6 id="6-3-11-argdist-and-trace"><a href="#6-3-11-argdist-and-trace" class="headerlink" title="6.3.11 argdist and trace"></a>6.3.11 argdist and trace</h6><h6 id="6-3-12-funccount"><a href="#6-3-12-funccount" class="headerlink" title="6.3.12 funccount"></a>6.3.12 funccount</h6><h6 id="6-3-13-softirqs"><a href="#6-3-13-softirqs" class="headerlink" title="6.3.13 softirqs"></a>6.3.13 softirqs</h6><h6 id="6-3-14-hardirqs"><a href="#6-3-14-hardirqs" class="headerlink" title="6.3.14 hardirqs"></a>6.3.14 hardirqs</h6><h6 id="6-3-15-smpcalls"><a href="#6-3-15-smpcalls" class="headerlink" title="6.3.15 smpcalls"></a>6.3.15 smpcalls</h6><h6 id="6-3-16-llcstat"><a href="#6-3-16-llcstat" class="headerlink" title="6.3.16 llcstat"></a>6.3.16 llcstat</h6><h6 id="6-3-17-Other-Tools"><a href="#6-3-17-Other-Tools" class="headerlink" title="6.3.17 Other Tools"></a>6.3.17 Other Tools</h6><blockquote></blockquote><h5 id="6-4-BPF单行程序"><a href="#6-4-BPF单行程序" class="headerlink" title="6.4 BPF单行程序"></a>6.4 BPF单行程序</h5><h6 id="6-4-1-BCC"><a href="#6-4-1-BCC" class="headerlink" title="6.4.1 BCC"></a>6.4.1 BCC</h6><h6 id="6-4-2-bpftrace"><a href="#6-4-2-bpftrace" class="headerlink" title="6.4.2 bpftrace"></a>6.4.2 bpftrace</h6><blockquote></blockquote><h4 id="第七章-内存"><a href="#第七章-内存" class="headerlink" title="第七章 内存"></a>第七章 内存</h4><h5 id="7-1-背景知识"><a href="#7-1-背景知识" class="headerlink" title="7.1 背景知识"></a>7.1 背景知识</h5><h6 id="7-1-1-Memory-Fundamentals"><a href="#7-1-1-Memory-Fundamentals" class="headerlink" title="7.1.1 Memory Fundamentals"></a>7.1.1 Memory Fundamentals</h6><h6 id="7-1-2-BPF-Capabilities"><a href="#7-1-2-BPF-Capabilities" class="headerlink" title="7.1.2 BPF Capabilities"></a>7.1.2 BPF Capabilities</h6><h6 id="7-1-3-Strategy"><a href="#7-1-3-Strategy" class="headerlink" title="7.1.3 Strategy"></a>7.1.3 Strategy</h6><blockquote></blockquote><h5 id="7-2-传统工具"><a href="#7-2-传统工具" class="headerlink" title="7.2 传统工具"></a>7.2 传统工具</h5><h6 id="7-2-1-Kernel-Log"><a href="#7-2-1-Kernel-Log" class="headerlink" title="7.2.1 Kernel Log"></a>7.2.1 Kernel Log</h6><h6 id="7-2-2-Kernel-Statistics"><a href="#7-2-2-Kernel-Statistics" class="headerlink" title="7.2.2 Kernel Statistics"></a>7.2.2 Kernel Statistics</h6><h6 id="7-2-3-Hardware-Statistics-and-Sampling"><a href="#7-2-3-Hardware-Statistics-and-Sampling" class="headerlink" title="7.2.3 Hardware Statistics and Sampling"></a>7.2.3 Hardware Statistics and Sampling</h6><blockquote></blockquote><h5 id="7-3-BPF工具"><a href="#7-3-BPF工具" class="headerlink" title="7.3 BPF工具"></a>7.3 BPF工具</h5><h6 id="7-3-1-oomkill"><a href="#7-3-1-oomkill" class="headerlink" title="7.3.1 oomkill"></a>7.3.1 oomkill</h6><h6 id="7-3-2-memleak"><a href="#7-3-2-memleak" class="headerlink" title="7.3.2 memleak"></a>7.3.2 memleak</h6><h6 id="7-3-3-mmapsnoop"><a href="#7-3-3-mmapsnoop" class="headerlink" title="7.3.3 mmapsnoop"></a>7.3.3 mmapsnoop</h6><h6 id="7-3-4-brkstack"><a href="#7-3-4-brkstack" class="headerlink" title="7.3.4 brkstack"></a>7.3.4 brkstack</h6><h6 id="7-3-5-shmsnoop"><a href="#7-3-5-shmsnoop" class="headerlink" title="7.3.5 shmsnoop"></a>7.3.5 shmsnoop</h6><h6 id="7-3-6-faults"><a href="#7-3-6-faults" class="headerlink" title="7.3.6 faults"></a>7.3.6 faults</h6><h6 id="7-3-7-ffaults"><a href="#7-3-7-ffaults" class="headerlink" title="7.3.7 ffaults"></a>7.3.7 ffaults</h6><h6 id="7-3-8-vmscan"><a href="#7-3-8-vmscan" class="headerlink" title="7.3.8 vmscan"></a>7.3.8 vmscan</h6><h6 id="7-3-9-drsnoop"><a href="#7-3-9-drsnoop" class="headerlink" title="7.3.9 drsnoop"></a>7.3.9 drsnoop</h6><h6 id="7-3-10-swapin"><a href="#7-3-10-swapin" class="headerlink" title="7.3.10 swapin"></a>7.3.10 swapin</h6><h6 id="7-3-11-hfaults"><a href="#7-3-11-hfaults" class="headerlink" title="7.3.11 hfaults"></a>7.3.11 hfaults</h6><h6 id="7-3-12-Other-Tools"><a href="#7-3-12-Other-Tools" class="headerlink" title="7.3.12 Other Tools"></a>7.3.12 Other Tools</h6><blockquote></blockquote><h5 id="7-4-BPF单行程序"><a href="#7-4-BPF单行程序" class="headerlink" title="7.4 BPF单行程序"></a>7.4 BPF单行程序</h5><h6 id="7-4-1-BCC"><a href="#7-4-1-BCC" class="headerlink" title="7.4.1 BCC"></a>7.4.1 BCC</h6><h6 id="7-4-2-bpftrace"><a href="#7-4-2-bpftrace" class="headerlink" title="7.4.2 bpftrace"></a>7.4.2 bpftrace</h6><blockquote></blockquote><h5 id="7-5-Optional-Exercises"><a href="#7-5-Optional-Exercises" class="headerlink" title="7.5 Optional Exercises"></a>7.5 Optional Exercises</h5><h5 id="7-6-Summary"><a href="#7-6-Summary" class="headerlink" title="7.6 Summary"></a>7.6 Summary</h5><h4 id="第八章-文件系统"><a href="#第八章-文件系统" class="headerlink" title="第八章 文件系统"></a>第八章 文件系统</h4><h5 id="8-1-背景知识"><a href="#8-1-背景知识" class="headerlink" title="8.1 背景知识"></a>8.1 背景知识</h5><h6 id="8-1-1-File-Systems-Fundamentals"><a href="#8-1-1-File-Systems-Fundamentals" class="headerlink" title="8.1.1 File Systems Fundamentals"></a>8.1.1 File Systems Fundamentals</h6><h6 id="8-1-2-BPF-Capabilities"><a href="#8-1-2-BPF-Capabilities" class="headerlink" title="8.1.2 BPF Capabilities"></a>8.1.2 BPF Capabilities</h6><h6 id="8-1-3-Strategy"><a href="#8-1-3-Strategy" class="headerlink" title="8.1.3 Strategy"></a>8.1.3 Strategy</h6><blockquote></blockquote><h5 id="8-2-传统工具"><a href="#8-2-传统工具" class="headerlink" title="8.2 传统工具"></a>8.2 传统工具</h5><h6 id="8-2-1-df"><a href="#8-2-1-df" class="headerlink" title="8.2.1 df"></a>8.2.1 df</h6><h6 id="8-2-2-mount"><a href="#8-2-2-mount" class="headerlink" title="8.2.2 mount"></a>8.2.2 mount</h6><h6 id="8-2-3-strace"><a href="#8-2-3-strace" class="headerlink" title="8.2.3 strace"></a>8.2.3 strace</h6><h6 id="8-2-4-perf"><a href="#8-2-4-perf" class="headerlink" title="8.2.4 perf"></a>8.2.4 perf</h6><h6 id="8-2-5-fatrace"><a href="#8-2-5-fatrace" class="headerlink" title="8.2.5 fatrace"></a>8.2.5 fatrace</h6><blockquote></blockquote><h5 id="8-3-BPF工具"><a href="#8-3-BPF工具" class="headerlink" title="8.3 BPF工具"></a>8.3 BPF工具</h5><h6 id="8-3-1-opensnoop"><a href="#8-3-1-opensnoop" class="headerlink" title="8.3.1 opensnoop"></a>8.3.1 opensnoop</h6><h6 id="8-3-2-statsnoop"><a href="#8-3-2-statsnoop" class="headerlink" title="8.3.2 statsnoop"></a>8.3.2 statsnoop</h6><h6 id="8-3-3-syncsnoop"><a href="#8-3-3-syncsnoop" class="headerlink" title="8.3.3 syncsnoop"></a>8.3.3 syncsnoop</h6><h6 id="8-3-4-mmapfiles"><a href="#8-3-4-mmapfiles" class="headerlink" title="8.3.4 mmapfiles"></a>8.3.4 mmapfiles</h6><h6 id="8-3-5-scread"><a href="#8-3-5-scread" class="headerlink" title="8.3.5 scread"></a>8.3.5 scread</h6><h6 id="8-3-6-fmapfaul"><a href="#8-3-6-fmapfaul" class="headerlink" title="8.3.6 fmapfaul"></a>8.3.6 fmapfaul</h6><h6 id="8-3-7-filelife"><a href="#8-3-7-filelife" class="headerlink" title="8.3.7 filelife"></a>8.3.7 filelife</h6><h6 id="8-3-8-vfssta"><a href="#8-3-8-vfssta" class="headerlink" title="8.3.8 vfssta"></a>8.3.8 vfssta</h6><h6 id="8-3-8-vfssta-1"><a href="#8-3-8-vfssta-1" class="headerlink" title="8.3.8 vfssta"></a>8.3.8 vfssta</h6><h6 id="8-3-9-vfscount"><a href="#8-3-9-vfscount" class="headerlink" title="8.3.9 vfscount"></a>8.3.9 vfscount</h6><h6 id="8-3-10-vfssiz"><a href="#8-3-10-vfssiz" class="headerlink" title="8.3.10 vfssiz"></a>8.3.10 vfssiz</h6><h6 id="8-3-11-fsrwsta"><a href="#8-3-11-fsrwsta" class="headerlink" title="8.3.11 fsrwsta"></a>8.3.11 fsrwsta</h6><h6 id="8-3-12-fileslower"><a href="#8-3-12-fileslower" class="headerlink" title="8.3.12 fileslower"></a>8.3.12 fileslower</h6><h6 id="8-3-13-filetop"><a href="#8-3-13-filetop" class="headerlink" title="8.3.13 filetop"></a>8.3.13 filetop</h6><h6 id="8-3-14-writesync"><a href="#8-3-14-writesync" class="headerlink" title="8.3.14 writesync"></a>8.3.14 writesync</h6><h6 id="8-3-15-filetype"><a href="#8-3-15-filetype" class="headerlink" title="8.3.15 filetype"></a>8.3.15 filetype</h6><h6 id="8-3-16-cachestat"><a href="#8-3-16-cachestat" class="headerlink" title="8.3.16 cachestat"></a>8.3.16 cachestat</h6><h6 id="8-3-17-writeback"><a href="#8-3-17-writeback" class="headerlink" title="8.3.17 writeback"></a>8.3.17 writeback</h6><h6 id="8-3-18-dcstat"><a href="#8-3-18-dcstat" class="headerlink" title="8.3.18 dcstat"></a>8.3.18 dcstat</h6><h6 id="8-3-19-dcsnoop"><a href="#8-3-19-dcsnoop" class="headerlink" title="8.3.19 dcsnoop"></a>8.3.19 dcsnoop</h6><h6 id="8-3-20-mountsnoop"><a href="#8-3-20-mountsnoop" class="headerlink" title="8.3.20 mountsnoop"></a>8.3.20 mountsnoop</h6><h6 id="8-3-21-xfsslower"><a href="#8-3-21-xfsslower" class="headerlink" title="8.3.21 xfsslower"></a>8.3.21 xfsslower</h6><h6 id="8-3-22-xfsdist"><a href="#8-3-22-xfsdist" class="headerlink" title="8.3.22 xfsdist"></a>8.3.22 xfsdist</h6><h6 id="8-3-23-ext4dist"><a href="#8-3-23-ext4dist" class="headerlink" title="8.3.23 ext4dist"></a>8.3.23 ext4dist</h6><h6 id="8-3-24-icstat"><a href="#8-3-24-icstat" class="headerlink" title="8.3.24 icstat"></a>8.3.24 icstat</h6><h6 id="8-3-25-bufgrow"><a href="#8-3-25-bufgrow" class="headerlink" title="8.3.25 bufgrow"></a>8.3.25 bufgrow</h6><h6 id="8-3-26-readahead"><a href="#8-3-26-readahead" class="headerlink" title="8.3.26 readahead"></a>8.3.26 readahead</h6><h6 id="8-3-27-Other-Tools"><a href="#8-3-27-Other-Tools" class="headerlink" title="8.3.27 Other Tools"></a>8.3.27 Other Tools</h6><blockquote></blockquote><h5 id="8-4-BPF单行程序"><a href="#8-4-BPF单行程序" class="headerlink" title="8.4 BPF单行程序"></a>8.4 BPF单行程序</h5><h4 id="第九章-磁盘io"><a href="#第九章-磁盘io" class="headerlink" title="第九章 磁盘io"></a>第九章 磁盘io</h4><blockquote></blockquote><h5 id="9-1-背景知识"><a href="#9-1-背景知识" class="headerlink" title="9.1 背景知识"></a>9.1 背景知识</h5><blockquote></blockquote><h5 id="9-2-传统工具"><a href="#9-2-传统工具" class="headerlink" title="9.2 传统工具"></a>9.2 传统工具</h5><blockquote></blockquote><h5 id="9-3-BPF工具"><a href="#9-3-BPF工具" class="headerlink" title="9.3 BPF工具"></a>9.3 BPF工具</h5><h6 id="9-3-1-biolatency"><a href="#9-3-1-biolatency" class="headerlink" title="9.3.1 biolatency"></a>9.3.1 biolatency</h6><h6 id="9-3-2-biosnoop"><a href="#9-3-2-biosnoop" class="headerlink" title="9.3.2 biosnoop"></a>9.3.2 biosnoop</h6><h6 id="9-3-3-biotop"><a href="#9-3-3-biotop" class="headerlink" title="9.3.3 biotop"></a>9.3.3 biotop</h6><h6 id="9-3-4-bitesize"><a href="#9-3-4-bitesize" class="headerlink" title="9.3.4 bitesize"></a>9.3.4 bitesize</h6><h6 id="9-3-5-seeksize"><a href="#9-3-5-seeksize" class="headerlink" title="9.3.5 seeksize"></a>9.3.5 seeksize</h6><h6 id="9-3-6-biopattern"><a href="#9-3-6-biopattern" class="headerlink" title="9.3.6 biopattern"></a>9.3.6 biopattern</h6><h6 id="9-3-7-biostacks"><a href="#9-3-7-biostacks" class="headerlink" title="9.3.7 biostacks"></a>9.3.7 biostacks</h6><h6 id="9-3-8-bioerr"><a href="#9-3-8-bioerr" class="headerlink" title="9.3.8 bioerr"></a>9.3.8 bioerr</h6><h6 id="9-3-9-mdflush"><a href="#9-3-9-mdflush" class="headerlink" title="9.3.9 mdflush"></a>9.3.9 mdflush</h6><h6 id="9-3-10-iosched"><a href="#9-3-10-iosched" class="headerlink" title="9.3.10 iosched"></a>9.3.10 iosched</h6><h6 id="9-3-11-scsilatency"><a href="#9-3-11-scsilatency" class="headerlink" title="9.3.11 scsilatency"></a>9.3.11 scsilatency</h6><h6 id="9-3-12-scsiresult"><a href="#9-3-12-scsiresult" class="headerlink" title="9.3.12 scsiresult"></a>9.3.12 scsiresult</h6><h6 id="9-3-13-nvmelatency"><a href="#9-3-13-nvmelatency" class="headerlink" title="9.3.13 nvmelatency"></a>9.3.13 nvmelatency</h6><blockquote></blockquote><h5 id="9-4-BPF单行程序"><a href="#9-4-BPF单行程序" class="headerlink" title="9.4 BPF单行程序"></a>9.4 BPF单行程序</h5><p>####</p><blockquote></blockquote><h4 id="第十章-网络"><a href="#第十章-网络" class="headerlink" title="第十章 网络"></a>第十章 网络</h4><h5 id="10-1-背景知识"><a href="#10-1-背景知识" class="headerlink" title="10.1 背景知识"></a>10.1 背景知识</h5><blockquote></blockquote><h5 id="10-2-传统工具"><a href="#10-2-传统工具" class="headerlink" title="10.2 传统工具"></a>10.2 传统工具</h5><blockquote></blockquote><h5 id="10-3-BPF工具"><a href="#10-3-BPF工具" class="headerlink" title="10.3 BPF工具"></a>10.3 BPF工具</h5><h6 id="10-3-1-sockstat"><a href="#10-3-1-sockstat" class="headerlink" title="10.3.1 sockstat"></a>10.3.1 sockstat</h6><h6 id="10-3-2-sofamily"><a href="#10-3-2-sofamily" class="headerlink" title="10.3.2 sofamily"></a>10.3.2 sofamily</h6><h6 id="10-3-3-soprotocol"><a href="#10-3-3-soprotocol" class="headerlink" title="10.3.3 soprotocol"></a>10.3.3 soprotocol</h6><h6 id="10-3-4-soconnect"><a href="#10-3-4-soconnect" class="headerlink" title="10.3.4 soconnect"></a>10.3.4 soconnect</h6><h6 id="10-3-5-soaccept"><a href="#10-3-5-soaccept" class="headerlink" title="10.3.5 soaccept"></a>10.3.5 soaccept</h6><h6 id="10-3-6-socketio"><a href="#10-3-6-socketio" class="headerlink" title="10.3.6 socketio"></a>10.3.6 socketio</h6><h6 id="10-3-7-socksize"><a href="#10-3-7-socksize" class="headerlink" title="10.3.7 socksize"></a>10.3.7 socksize</h6><h6 id="10-3-8-sormem"><a href="#10-3-8-sormem" class="headerlink" title="10.3.8 sormem"></a>10.3.8 sormem</h6><h6 id="10-3-9-soconnlat"><a href="#10-3-9-soconnlat" class="headerlink" title="10.3.9 soconnlat"></a>10.3.9 soconnlat</h6><h6 id="10-3-10-so1stbyte"><a href="#10-3-10-so1stbyte" class="headerlink" title="10.3.10 so1stbyte"></a>10.3.10 so1stbyte</h6><h6 id="10-3-11-tcpconnect"><a href="#10-3-11-tcpconnect" class="headerlink" title="10.3.11 tcpconnect"></a>10.3.11 tcpconnect</h6><h6 id="10-3-12-tcpaccept"><a href="#10-3-12-tcpaccept" class="headerlink" title="10.3.12 tcpaccept"></a>10.3.12 tcpaccept</h6><h6 id="10-3-13-tcplife"><a href="#10-3-13-tcplife" class="headerlink" title="10.3.13 tcplife"></a>10.3.13 tcplife</h6><h6 id="10-3-14-tcptop"><a href="#10-3-14-tcptop" class="headerlink" title="10.3.14 tcptop"></a>10.3.14 tcptop</h6><h6 id="10-3-15-tcpsnoop"><a href="#10-3-15-tcpsnoop" class="headerlink" title="10.3.15 tcpsnoop"></a>10.3.15 tcpsnoop</h6><h6 id="10-3-16-tcpretrans"><a href="#10-3-16-tcpretrans" class="headerlink" title="10.3.16 tcpretrans"></a>10.3.16 tcpretrans</h6><h6 id="10-3-17-tcpsynbl"><a href="#10-3-17-tcpsynbl" class="headerlink" title="10.3.17 tcpsynbl"></a>10.3.17 tcpsynbl</h6><h6 id="10-3-18-tcpwin"><a href="#10-3-18-tcpwin" class="headerlink" title="10.3.18 tcpwin"></a>10.3.18 tcpwin</h6><h6 id="10-3-19-tcpnagle"><a href="#10-3-19-tcpnagle" class="headerlink" title="10.3.19 tcpnagle"></a>10.3.19 tcpnagle</h6><h6 id="10-3-20-udpconnect"><a href="#10-3-20-udpconnect" class="headerlink" title="10.3.20 udpconnect"></a>10.3.20 udpconnect</h6><h6 id="10-3-21-gethostlatency"><a href="#10-3-21-gethostlatency" class="headerlink" title="10.3.21 gethostlatency"></a>10.3.21 gethostlatency</h6><h6 id="10-3-22-ipecn"><a href="#10-3-22-ipecn" class="headerlink" title="10.3.22 ipecn"></a>10.3.22 ipecn</h6><h6 id="10-3-23-superping"><a href="#10-3-23-superping" class="headerlink" title="10.3.23 superping"></a>10.3.23 superping</h6><h6 id="10-3-24-qdisc-fq"><a href="#10-3-24-qdisc-fq" class="headerlink" title="10.3.24 qdisc-fq"></a>10.3.24 qdisc-fq</h6><h6 id="10-3-25-qdisc-cbq-qdisc-cbs-qdisc-codel-qdisc-fq-codel-qdisc-red-and-qdisc-tbf"><a href="#10-3-25-qdisc-cbq-qdisc-cbs-qdisc-codel-qdisc-fq-codel-qdisc-red-and-qdisc-tbf" class="headerlink" title="10.3.25 qdisc-cbq, qdisc-cbs, qdisc-codel, qdisc-fq_codel, qdisc-red, and qdisc-tbf"></a>10.3.25 qdisc-cbq, qdisc-cbs, qdisc-codel, qdisc-fq_codel, qdisc-red, and qdisc-tbf</h6><h6 id="10-3-26-netsize"><a href="#10-3-26-netsize" class="headerlink" title="10.3.26 netsize"></a>10.3.26 netsize</h6><h6 id="10-3-27-nettxlat"><a href="#10-3-27-nettxlat" class="headerlink" title="10.3.27 nettxlat"></a>10.3.27 nettxlat</h6><h6 id="10-3-28-skbdrop"><a href="#10-3-28-skbdrop" class="headerlink" title="10.3.28 skbdrop"></a>10.3.28 skbdrop</h6><h6 id="10-3-29-skblife"><a href="#10-3-29-skblife" class="headerlink" title="10.3.29 skblife"></a>10.3.29 skblife</h6><h6 id="10-3-30-ieee80211scan"><a href="#10-3-30-ieee80211scan" class="headerlink" title="10.3.30 ieee80211scan"></a>10.3.30 ieee80211scan</h6><h6 id="10-3-31-Other-Tools"><a href="#10-3-31-Other-Tools" class="headerlink" title="10.3.31 Other Tools"></a>10.3.31 Other Tools</h6><blockquote></blockquote><h5 id="10-4-BPF单行程序"><a href="#10-4-BPF单行程序" class="headerlink" title="10.4 BPF单行程序"></a>10.4 BPF单行程序</h5><h6 id="10-4-1-BCC"><a href="#10-4-1-BCC" class="headerlink" title="10.4.1 BCC"></a>10.4.1 BCC</h6><h6 id="10-4-2-bpftrace"><a href="#10-4-2-bpftrace" class="headerlink" title="10.4.2 bpftrace"></a>10.4.2 bpftrace</h6><h6 id="10-4-3-BPF-One-Liners-Examples"><a href="#10-4-3-BPF-One-Liners-Examples" class="headerlink" title="10.4.3 BPF One-Liners Examples"></a>10.4.3 BPF One-Liners Examples</h6><blockquote></blockquote><h4 id="第十一章-安全"><a href="#第十一章-安全" class="headerlink" title="第十一章 安全"></a>第十一章 安全</h4><h5 id="11-1-背景知识"><a href="#11-1-背景知识" class="headerlink" title="11.1 背景知识"></a>11.1 背景知识</h5><h6 id="11-1-1-BPF-Capabilities"><a href="#11-1-1-BPF-Capabilities" class="headerlink" title="11.1.1 BPF Capabilities"></a>11.1.1 BPF Capabilities</h6><h6 id="11-1-2-Unprivileged-BPF-Users"><a href="#11-1-2-Unprivileged-BPF-Users" class="headerlink" title="11.1.2 Unprivileged BPF Users"></a>11.1.2 Unprivileged BPF Users</h6><h6 id="11-1-3-Configuring-BPF-Security"><a href="#11-1-3-Configuring-BPF-Security" class="headerlink" title="11.1.3 Configuring BPF Security"></a>11.1.3 Configuring BPF Security</h6><h6 id="11-1-4-Strategy"><a href="#11-1-4-Strategy" class="headerlink" title="11.1.4 Strategy"></a>11.1.4 Strategy</h6><blockquote></blockquote><h5 id="11-2-BPF工具"><a href="#11-2-BPF工具" class="headerlink" title="11.2 BPF工具"></a>11.2 BPF工具</h5><h6 id="11-2-1-execsnoop"><a href="#11-2-1-execsnoop" class="headerlink" title="11.2.1 execsnoop"></a>11.2.1 execsnoop</h6><h6 id="11-2-2-elfsnoop"><a href="#11-2-2-elfsnoop" class="headerlink" title="11.2.2 elfsnoop"></a>11.2.2 elfsnoop</h6><h6 id="11-2-3-modsnoop"><a href="#11-2-3-modsnoop" class="headerlink" title="11.2.3 modsnoop"></a>11.2.3 modsnoop</h6><h6 id="11-2-4-bashreadline"><a href="#11-2-4-bashreadline" class="headerlink" title="11.2.4 bashreadline"></a>11.2.4 bashreadline</h6><h6 id="11-2-5-shellsnoop"><a href="#11-2-5-shellsnoop" class="headerlink" title="11.2.5 shellsnoop"></a>11.2.5 shellsnoop</h6><h6 id="11-2-6-ttysnoop"><a href="#11-2-6-ttysnoop" class="headerlink" title="11.2.6 ttysnoop"></a>11.2.6 ttysnoop</h6><h6 id="11-2-7-opensnoop"><a href="#11-2-7-opensnoop" class="headerlink" title="11.2.7 opensnoop"></a>11.2.7 opensnoop</h6><h6 id="11-2-8-eperm"><a href="#11-2-8-eperm" class="headerlink" title="11.2.8 eperm"></a>11.2.8 eperm</h6><h6 id="11-2-9-tcpconnect-and-tcpaccept"><a href="#11-2-9-tcpconnect-and-tcpaccept" class="headerlink" title="11.2.9 tcpconnect and tcpaccept"></a>11.2.9 tcpconnect and tcpaccept</h6><h6 id="11-2-10-tcpreset"><a href="#11-2-10-tcpreset" class="headerlink" title="11.2.10 tcpreset"></a>11.2.10 tcpreset</h6><h6 id="11-2-11-capable"><a href="#11-2-11-capable" class="headerlink" title="11.2.11 capable"></a>11.2.11 capable</h6><h6 id="11-2-12-setuids"><a href="#11-2-12-setuids" class="headerlink" title="11.2.12 setuids"></a>11.2.12 setuids</h6><blockquote></blockquote><h5 id="11-3-BPF单行程序"><a href="#11-3-BPF单行程序" class="headerlink" title="11.3 BPF单行程序"></a>11.3 BPF单行程序</h5><h5 id="11-3-1-BCC"><a href="#11-3-1-BCC" class="headerlink" title="11.3.1 BCC"></a>11.3.1 BCC</h5><h5 id="11-3-2-bpftrace"><a href="#11-3-2-bpftrace" class="headerlink" title="11.3.2 bpftrace"></a>11.3.2 bpftrace</h5><h5 id="11-3-3-BPF-One-Liners-Examples"><a href="#11-3-3-BPF-One-Liners-Examples" class="headerlink" title="11.3.3 BPF One-Liners Examples"></a>11.3.3 BPF One-Liners Examples</h5><blockquote></blockquote><h4 id="第十二章-编程语言"><a href="#第十二章-编程语言" class="headerlink" title="第十二章 编程语言"></a>第十二章 编程语言</h4><blockquote></blockquote><h5 id="12-1-背景知识"><a href="#12-1-背景知识" class="headerlink" title="12.1 背景知识"></a>12.1 背景知识</h5><h6 id="12-1-1-Compiled"><a href="#12-1-1-Compiled" class="headerlink" title="12.1.1 Compiled"></a>12.1.1 Compiled</h6><h6 id="12-1-2-JIT-Compiled"><a href="#12-1-2-JIT-Compiled" class="headerlink" title="12.1.2 JIT Compiled"></a>12.1.2 JIT Compiled</h6><h6 id="12-1-3-Interpreted"><a href="#12-1-3-Interpreted" class="headerlink" title="12.1.3 Interpreted"></a>12.1.3 Interpreted</h6><h6 id="12-1-4-BPF-Capabilities"><a href="#12-1-4-BPF-Capabilities" class="headerlink" title="12.1.4 BPF Capabilities"></a>12.1.4 BPF Capabilities</h6><h6 id="12-1-5-Strategy"><a href="#12-1-5-Strategy" class="headerlink" title="12.1.5 Strategy"></a>12.1.5 Strategy</h6><h6 id="12-1-6-BPF-Tools"><a href="#12-1-6-BPF-Tools" class="headerlink" title="12.1.6 BPF Tools"></a>12.1.6 BPF Tools</h6><p>######</p><blockquote></blockquote><h5 id="12-2-C"><a href="#12-2-C" class="headerlink" title="12.2 C"></a>12.2 C</h5><h6 id="12-2-1-C-Function-Symbols"><a href="#12-2-1-C-Function-Symbols" class="headerlink" title="12.2.1 C Function Symbols"></a>12.2.1 C Function Symbols</h6><h6 id="12-2-2-C-Stack-Traces"><a href="#12-2-2-C-Stack-Traces" class="headerlink" title="12.2.2 C Stack Traces"></a>12.2.2 C Stack Traces</h6><h6 id="12-2-3-C-Function-Tracing"><a href="#12-2-3-C-Function-Tracing" class="headerlink" title="12.2.3 C Function Tracing"></a>12.2.3 C Function Tracing</h6><h6 id="12-2-4-C-Function-Offset-Tracing"><a href="#12-2-4-C-Function-Offset-Tracing" class="headerlink" title="12.2.4 C Function Offset Tracing"></a>12.2.4 C Function Offset Tracing</h6><h6 id="12-2-5-C-USDT"><a href="#12-2-5-C-USDT" class="headerlink" title="12.2.5 C USDT"></a>12.2.5 C USDT</h6><h6 id="12-2-6-C-One-Liners"><a href="#12-2-6-C-One-Liners" class="headerlink" title="12.2.6 C One-Liners"></a>12.2.6 C One-Liners</h6><blockquote></blockquote><h5 id="12-3-Java"><a href="#12-3-Java" class="headerlink" title="12.3 Java"></a>12.3 Java</h5><h6 id="12-3-1-libjvm-Tracing"><a href="#12-3-1-libjvm-Tracing" class="headerlink" title="12.3.1 libjvm Tracing"></a>12.3.1 libjvm Tracing</h6><h6 id="12-3-2-jnistacks"><a href="#12-3-2-jnistacks" class="headerlink" title="12.3.2 jnistacks"></a>12.3.2 jnistacks</h6><h6 id="12-3-3-Java-Thread-Names"><a href="#12-3-3-Java-Thread-Names" class="headerlink" title="12.3.3 Java Thread Names"></a>12.3.3 Java Thread Names</h6><h6 id="12-3-4-Java-Method-Symbols"><a href="#12-3-4-Java-Method-Symbols" class="headerlink" title="12.3.4 Java Method Symbols"></a>12.3.4 Java Method Symbols</h6><h6 id="12-3-5-Java-Stack-Traces"><a href="#12-3-5-Java-Stack-Traces" class="headerlink" title="12.3.5 Java Stack Traces"></a>12.3.5 Java Stack Traces</h6><h6 id="12-3-6-Java-USDT-Probes"><a href="#12-3-6-Java-USDT-Probes" class="headerlink" title="12.3.6 Java USDT Probes"></a>12.3.6 Java USDT Probes</h6><h6 id="12-3-7-profile"><a href="#12-3-7-profile" class="headerlink" title="12.3.7 profile"></a>12.3.7 profile</h6><h6 id="12-3-8-offcputime"><a href="#12-3-8-offcputime" class="headerlink" title="12.3.8 offcputime"></a>12.3.8 offcputime</h6><h6 id="12-3-9-stackcount"><a href="#12-3-9-stackcount" class="headerlink" title="12.3.9 stackcount"></a>12.3.9 stackcount</h6><h6 id="12-3-10-javastat"><a href="#12-3-10-javastat" class="headerlink" title="12.3.10 javastat"></a>12.3.10 javastat</h6><h6 id="12-3-11-javathreads"><a href="#12-3-11-javathreads" class="headerlink" title="12.3.11 javathreads"></a>12.3.11 javathreads</h6><h6 id="12-3-12-javacalls"><a href="#12-3-12-javacalls" class="headerlink" title="12.3.12 javacalls"></a>12.3.12 javacalls</h6><h6 id="12-3-13-javaflow"><a href="#12-3-13-javaflow" class="headerlink" title="12.3.13 javaflow"></a>12.3.13 javaflow</h6><h6 id="12-3-14-javagc"><a href="#12-3-14-javagc" class="headerlink" title="12.3.14 javagc"></a>12.3.14 javagc</h6><h6 id="12-3-15-javaobjnew"><a href="#12-3-15-javaobjnew" class="headerlink" title="12.3.15 javaobjnew"></a>12.3.15 javaobjnew</h6><h6 id="12-3-16-Java-One-Liners"><a href="#12-3-16-Java-One-Liners" class="headerlink" title="12.3.16 Java One-Liners"></a>12.3.16 Java One-Liners</h6><blockquote></blockquote><h5 id="12-4-bash-shell"><a href="#12-4-bash-shell" class="headerlink" title="12.4 bash shell"></a>12.4 bash shell</h5><h5 id="12-4-1-Function-Counts"><a href="#12-4-1-Function-Counts" class="headerlink" title="12.4.1 Function Counts"></a>12.4.1 Function Counts</h5><h5 id="12-4-2-Function-Argument-Tracing-bashfunc-bt"><a href="#12-4-2-Function-Argument-Tracing-bashfunc-bt" class="headerlink" title="12.4.2 Function Argument Tracing (bashfunc.bt)"></a>12.4.2 Function Argument Tracing (bashfunc.bt)</h5><h5 id="12-4-3-Function-Latency-bashfunclat-bt"><a href="#12-4-3-Function-Latency-bashfunclat-bt" class="headerlink" title="12.4.3 Function Latency (bashfunclat.bt)"></a>12.4.3 Function Latency (bashfunclat.bt)</h5><h5 id="12-4-4-bin-bash"><a href="#12-4-4-bin-bash" class="headerlink" title="12.4.4 /bin/bash"></a>12.4.4 /bin/bash</h5><h5 id="12-4-5-bin-bash-USDT"><a href="#12-4-5-bin-bash-USDT" class="headerlink" title="12.4.5 /bin/bash USDT"></a>12.4.5 /bin/bash USDT</h5><h5 id="12-4-6-bash-One-Liners"><a href="#12-4-6-bash-One-Liners" class="headerlink" title="12.4.6 bash One-Liners"></a>12.4.6 bash One-Liners</h5><blockquote></blockquote><h5 id="12-5-其他语言"><a href="#12-5-其他语言" class="headerlink" title="12.5 其他语言"></a>12.5 其他语言</h5><h6 id="12-5-1-JavaScript-Node-js"><a href="#12-5-1-JavaScript-Node-js" class="headerlink" title="12.5.1 JavaScript (Node.js)"></a>12.5.1 JavaScript (Node.js)</h6><h6 id="12-5-2-C"><a href="#12-5-2-C" class="headerlink" title="12.5.2 C++"></a>12.5.2 C++</h6><h6 id="12-5-3-Golang"><a href="#12-5-3-Golang" class="headerlink" title="12.5.3 Golang"></a>12.5.3 Golang</h6><h5 id="12-6-Summary"><a href="#12-6-Summary" class="headerlink" title="12.6 Summary"></a>12.6 Summary</h5><blockquote></blockquote><h4 id="第十三章-应用程序"><a href="#第十三章-应用程序" class="headerlink" title="第十三章 应用程序"></a>第十三章 应用程序</h4><h5 id="13-1-背景知识"><a href="#13-1-背景知识" class="headerlink" title="13.1 背景知识"></a>13.1 背景知识</h5><h6 id="13-1-1-Application-Fundamentals"><a href="#13-1-1-Application-Fundamentals" class="headerlink" title="13.1.1 Application Fundamentals"></a>13.1.1 Application Fundamentals</h6><h6 id="13-1-2-Application-Example-MySQL-Server"><a href="#13-1-2-Application-Example-MySQL-Server" class="headerlink" title="13.1.2 Application Example: MySQL Server"></a>13.1.2 Application Example: MySQL Server</h6><h6 id="13-1-3-BPF-Capabilities"><a href="#13-1-3-BPF-Capabilities" class="headerlink" title="13.1.3 BPF Capabilities"></a>13.1.3 BPF Capabilities</h6><h6 id="13-1-4-Strategy"><a href="#13-1-4-Strategy" class="headerlink" title="13.1.4 Strategy"></a>13.1.4 Strategy</h6><blockquote></blockquote><h5 id="13-2-BPF工具"><a href="#13-2-BPF工具" class="headerlink" title="13.2 BPF工具"></a>13.2 BPF工具</h5><h6 id="13-2-1-execsnoop"><a href="#13-2-1-execsnoop" class="headerlink" title="13.2.1 execsnoop"></a>13.2.1 execsnoop</h6><h6 id="13-2-2-threadsnoop"><a href="#13-2-2-threadsnoop" class="headerlink" title="13.2.2 threadsnoop"></a>13.2.2 threadsnoop</h6><h6 id="13-2-3-profile"><a href="#13-2-3-profile" class="headerlink" title="13.2.3 profile"></a>13.2.3 profile</h6><h6 id="13-2-4-threaded"><a href="#13-2-4-threaded" class="headerlink" title="13.2.4 threaded"></a>13.2.4 threaded</h6><h6 id="13-2-5-offcputime"><a href="#13-2-5-offcputime" class="headerlink" title="13.2.5 offcputime"></a>13.2.5 offcputime</h6><h6 id="13-2-6-offcpuhist"><a href="#13-2-6-offcpuhist" class="headerlink" title="13.2.6 offcpuhist"></a>13.2.6 offcpuhist</h6><h6 id="13-2-7-syscount"><a href="#13-2-7-syscount" class="headerlink" title="13.2.7 syscount"></a>13.2.7 syscount</h6><h6 id="13-2-8-ioprofile"><a href="#13-2-8-ioprofile" class="headerlink" title="13.2.8 ioprofile"></a>13.2.8 ioprofile</h6><h6 id="13-2-9-libc-Frame-Pointers"><a href="#13-2-9-libc-Frame-Pointers" class="headerlink" title="13.2.9 libc Frame Pointers"></a>13.2.9 libc Frame Pointers</h6><h6 id="13-2-10-mysqld-qslower"><a href="#13-2-10-mysqld-qslower" class="headerlink" title="13.2.10 mysqld_qslower"></a>13.2.10 mysqld_qslower</h6><h6 id="13-2-11-mysqld-clat"><a href="#13-2-11-mysqld-clat" class="headerlink" title="13.2.11 mysqld_clat"></a>13.2.11 mysqld_clat</h6><h6 id="13-2-12-signals"><a href="#13-2-12-signals" class="headerlink" title="13.2.12 signals"></a>13.2.12 signals</h6><h6 id="13-2-13-killsnoop"><a href="#13-2-13-killsnoop" class="headerlink" title="13.2.13 killsnoop"></a>13.2.13 killsnoop</h6><h6 id="13-2-14-pmlock-and-pmheld"><a href="#13-2-14-pmlock-and-pmheld" class="headerlink" title="13.2.14 pmlock and pmheld"></a>13.2.14 pmlock and pmheld</h6><h6 id="13-2-15-naptime"><a href="#13-2-15-naptime" class="headerlink" title="13.2.15 naptime"></a>13.2.15 naptime</h6><h6 id="13-2-16-Other-Tools"><a href="#13-2-16-Other-Tools" class="headerlink" title="13.2.16 Other Tools"></a>13.2.16 Other Tools</h6><blockquote></blockquote><h5 id="13-3-单行程序"><a href="#13-3-单行程序" class="headerlink" title="13.3 单行程序"></a>13.3 单行程序</h5><h6 id="13-3-1-BCC"><a href="#13-3-1-BCC" class="headerlink" title="13.3.1 BCC"></a>13.3.1 BCC</h6><h6 id="13-3-2-bpftrace"><a href="#13-3-2-bpftrace" class="headerlink" title="13.3.2 bpftrace"></a>13.3.2 bpftrace</h6><blockquote></blockquote><h5 id="13-4-BPF单行程序示例"><a href="#13-4-BPF单行程序示例" class="headerlink" title="13.4 BPF单行程序示例"></a>13.4 BPF单行程序示例</h5><blockquote></blockquote><h4 id="第十四章-内核"><a href="#第十四章-内核" class="headerlink" title="第十四章 内核"></a>第十四章 内核</h4><blockquote></blockquote><h5 id="14-1-背景知识"><a href="#14-1-背景知识" class="headerlink" title="14.1 背景知识"></a>14.1 背景知识</h5><h6 id="14-1-1-Kernel-Fundamentals"><a href="#14-1-1-Kernel-Fundamentals" class="headerlink" title="14.1.1 Kernel Fundamentals"></a>14.1.1 Kernel Fundamentals</h6><h6 id="14-1-2-BPF-Capabilities"><a href="#14-1-2-BPF-Capabilities" class="headerlink" title="14.1.2 BPF Capabilities"></a>14.1.2 BPF Capabilities</h6><blockquote></blockquote><h5 id="14-2-分析策略"><a href="#14-2-分析策略" class="headerlink" title="14.2 分析策略"></a>14.2 分析策略</h5><blockquote></blockquote><h5 id="14-3-传统工具"><a href="#14-3-传统工具" class="headerlink" title="14.3 传统工具"></a>14.3 传统工具</h5><h6 id="14-3-1-Ftrace"><a href="#14-3-1-Ftrace" class="headerlink" title="14.3.1 Ftrace"></a>14.3.1 Ftrace</h6><h6 id="14-3-2-perf-sched"><a href="#14-3-2-perf-sched" class="headerlink" title="14.3.2 perf sched"></a>14.3.2 perf sched</h6><h6 id="14-3-3-slabtop"><a href="#14-3-3-slabtop" class="headerlink" title="14.3.3 slabtop"></a>14.3.3 slabtop</h6><h6 id="14-3-4-Other-Tools"><a href="#14-3-4-Other-Tools" class="headerlink" title="14.3.4 Other Tools"></a>14.3.4 Other Tools</h6><blockquote></blockquote><h5 id="14-4-BPF工具"><a href="#14-4-BPF工具" class="headerlink" title="14.4 BPF工具"></a>14.4 BPF工具</h5><h6 id="14-4-1-loads"><a href="#14-4-1-loads" class="headerlink" title="14.4.1 loads"></a>14.4.1 loads</h6><h6 id="14-4-2-offcputime"><a href="#14-4-2-offcputime" class="headerlink" title="14.4.2 offcputime"></a>14.4.2 offcputime</h6><h6 id="14-4-3-wakeuptime"><a href="#14-4-3-wakeuptime" class="headerlink" title="14.4.3 wakeuptime"></a>14.4.3 wakeuptime</h6><h6 id="14-4-4-offwaketime"><a href="#14-4-4-offwaketime" class="headerlink" title="14.4.4 offwaketime"></a>14.4.4 offwaketime</h6><h6 id="14-4-5-mlock-and-mheld"><a href="#14-4-5-mlock-and-mheld" class="headerlink" title="14.4.5 mlock and mheld"></a>14.4.5 mlock and mheld</h6><h6 id="14-4-6-Spin-Locks"><a href="#14-4-6-Spin-Locks" class="headerlink" title="14.4.6 Spin Locks"></a>14.4.6 Spin Locks</h6><h6 id="14-4-7-kmem"><a href="#14-4-7-kmem" class="headerlink" title="14.4.7 kmem"></a>14.4.7 kmem</h6><h6 id="14-4-8-kpages"><a href="#14-4-8-kpages" class="headerlink" title="14.4.8 kpages"></a>14.4.8 kpages</h6><h6 id="14-4-9-memleak"><a href="#14-4-9-memleak" class="headerlink" title="14.4.9 memleak"></a>14.4.9 memleak</h6><h6 id="14-4-10-slabratetop"><a href="#14-4-10-slabratetop" class="headerlink" title="14.4.10 slabratetop"></a>14.4.10 slabratetop</h6><h6 id="14-4-11-numamove"><a href="#14-4-11-numamove" class="headerlink" title="14.4.11 numamove"></a>14.4.11 numamove</h6><h6 id="14-4-12-workq"><a href="#14-4-12-workq" class="headerlink" title="14.4.12 workq"></a>14.4.12 workq</h6><h6 id="14-4-13-Tasklets"><a href="#14-4-13-Tasklets" class="headerlink" title="14.4.13 Tasklets"></a>14.4.13 Tasklets</h6><h6 id="14-4-14-Other-Tools"><a href="#14-4-14-Other-Tools" class="headerlink" title="14.4.14 Other Tools"></a>14.4.14 Other Tools</h6><blockquote></blockquote><h5 id="14-5-BPF单行程序"><a href="#14-5-BPF单行程序" class="headerlink" title="14.5 BPF单行程序"></a>14.5 BPF单行程序</h5><h6 id="14-5-1-BCC"><a href="#14-5-1-BCC" class="headerlink" title="14.5.1 BCC"></a>14.5.1 BCC</h6><h6 id="14-5-2-bpftrace"><a href="#14-5-2-bpftrace" class="headerlink" title="14.5.2 bpftrace"></a>14.5.2 bpftrace</h6><blockquote></blockquote><h5 id="14-6-BPF单行程序示例"><a href="#14-6-BPF单行程序示例" class="headerlink" title="14.6 BPF单行程序示例"></a>14.6 BPF单行程序示例</h5><h6 id="14-6-1-Counting-System-Calls-by-Syscall-Function"><a href="#14-6-1-Counting-System-Calls-by-Syscall-Function" class="headerlink" title="14.6.1 Counting System Calls by Syscall Function"></a>14.6.1 Counting System Calls by Syscall Function</h6><h6 id="14-6-2-Counting-hrtimer-Starts-by-Kernel-Function"><a href="#14-6-2-Counting-hrtimer-Starts-by-Kernel-Function" class="headerlink" title="14.6.2 Counting hrtimer Starts by Kernel Function"></a>14.6.2 Counting hrtimer Starts by Kernel Function</h6><h5 id="14-7-Challenges"><a href="#14-7-Challenges" class="headerlink" title="14.7 Challenges"></a>14.7 Challenges</h5><h5 id="14-8-Summary"><a href="#14-8-Summary" class="headerlink" title="14.8 Summary"></a>14.8 Summary</h5><blockquote></blockquote><h4 id="第十五章-容器"><a href="#第十五章-容器" class="headerlink" title="第十五章 容器"></a>第十五章 容器</h4><blockquote></blockquote><h5 id="15-1-背景知识"><a href="#15-1-背景知识" class="headerlink" title="15.1 背景知识"></a>15.1 背景知识</h5><h6 id="15-1-1-BPF-Capabilities"><a href="#15-1-1-BPF-Capabilities" class="headerlink" title="15.1.1 BPF Capabilities"></a>15.1.1 BPF Capabilities</h6><h6 id="15-1-2-Challenges"><a href="#15-1-2-Challenges" class="headerlink" title="15.1.2 Challenges"></a>15.1.2 Challenges</h6><h6 id="15-1-3-Strategy"><a href="#15-1-3-Strategy" class="headerlink" title="15.1.3 Strategy"></a>15.1.3 Strategy</h6><blockquote></blockquote><h5 id="15-2-传统工具"><a href="#15-2-传统工具" class="headerlink" title="15.2 传统工具"></a>15.2 传统工具</h5><h6 id="15-2-1-From-the-Host"><a href="#15-2-1-From-the-Host" class="headerlink" title="15.2.1 From the Host"></a>15.2.1 From the Host</h6><h6 id="15-2-2-From-the-Container"><a href="#15-2-2-From-the-Container" class="headerlink" title="15.2.2 From the Container"></a>15.2.2 From the Container</h6><h6 id="15-2-3-systemd-cgtop"><a href="#15-2-3-systemd-cgtop" class="headerlink" title="15.2.3 systemd-cgtop"></a>15.2.3 systemd-cgtop</h6><h6 id="15-2-4-kubectl-top"><a href="#15-2-4-kubectl-top" class="headerlink" title="15.2.4 kubectl top"></a>15.2.4 kubectl top</h6><h6 id="15-2-5-docker-stats"><a href="#15-2-5-docker-stats" class="headerlink" title="15.2.5 docker stats"></a>15.2.5 docker stats</h6><h6 id="15-2-6-sys-fs-cgroups"><a href="#15-2-6-sys-fs-cgroups" class="headerlink" title="15.2.6 /sys/fs/cgroups"></a>15.2.6 /sys/fs/cgroups</h6><blockquote></blockquote><h5 id="15-3-BPF工具"><a href="#15-3-BPF工具" class="headerlink" title="15.3 BPF工具"></a>15.3 BPF工具</h5><blockquote></blockquote><h5 id="15-4-BPF单行程序"><a href="#15-4-BPF单行程序" class="headerlink" title="15.4 BPF单行程序"></a>15.4 BPF单行程序</h5><blockquote></blockquote><h5 id="15-5-可选练习"><a href="#15-5-可选练习" class="headerlink" title="15.5 可选练习"></a>15.5 可选练习</h5><blockquote></blockquote><h4 id="第十六章-虚拟机管理器"><a href="#第十六章-虚拟机管理器" class="headerlink" title="第十六章 虚拟机管理器"></a>第十六章 虚拟机管理器</h4><blockquote></blockquote><h5 id="16-1-背景知识"><a href="#16-1-背景知识" class="headerlink" title="16.1 背景知识"></a>16.1 背景知识</h5><blockquote></blockquote><h5 id="16-2-传统工具"><a href="#16-2-传统工具" class="headerlink" title="16.2 传统工具"></a>16.2 传统工具</h5><blockquote></blockquote><h5 id="16-3-访客系统的BPF工具"><a href="#16-3-访客系统的BPF工具" class="headerlink" title="16.3 访客系统的BPF工具"></a>16.3 访客系统的BPF工具</h5><blockquote></blockquote><h5 id="16-4-宿主机的BPF工具"><a href="#16-4-宿主机的BPF工具" class="headerlink" title="16.4 宿主机的BPF工具"></a>16.4 宿主机的BPF工具</h5><blockquote></blockquote></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://weeweetan.github.io/2024/03/09/BPF之巅学习笔记/" title="BPF之巅学习笔记" target="_blank" rel="external">https://weeweetan.github.io/2024/03/09/BPF之巅学习笔记/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/weeweetan" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/weeweetan" target="_blank"><span class="text-dark">weeweetan</span><small class="ml-1x">Backend Developer</small></a></h3><div>初级程序猿，之前主要涉及数据备份相关领域，现在研究CDN方向。业余时间也喜欢锻炼下，目前参过一次半程马拉松，四次全程马拉松，半马最好成绩99分钟，全马最好成绩3小时47分钟。</div></div></figure></div></div></div></article><section id="comments"></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="next"><a href="/2023/12/14/Nginx的mirror模块详解/" title="Nginx的mirror模块详解"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>感谢您的支持，我会继续努力的!</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.jpg" alt="扫码支持" title="扫一扫"></div><p class="text-muted mv">扫码打赏，你说多少就多少</p><p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.jpg" alt="扫码支持" title="扫一扫"></div><p class="text-muted mv">扫码打赏，你说多少就多少</p><p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/weeweetan" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="http://weibo.com" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top"><i class="icon icon-weibo"></i></a></li><li><a href="https://twitter.com" target="_blank" title="Twitter" data-toggle="tooltip" data-placement="top"><i class="icon icon-twitter"></i></a></li><li><a href="https://www.behance.net" target="_blank" title="Behance" data-toggle="tooltip" data-placement="top"><i class="icon icon-behance"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright">&copy; 2025 weeweetan<div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>!function(T){var N={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"};T.INSIGHT_CONFIG=N}(window)</script><script src="/js/insight.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.js"></script><script src="//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"d1c2d759e243e33eff9f",clientSecret:"8bf8ce0f7198ac71bde522fc93877107874d7da1",repo:"weeweetan.github.io",owner:"weeweetan",admin:["weeweetan"],id:md5(location.pathname),distractionFreeMode:!0});gitalk.render("comments")</script></body></html><!-- rebuild by neat -->